# ğŸ”„ CMMS System Workflow Documentation

**Complete workflow documentation for CMMS (Computerized Maintenance Management System)**

**Project:** PepsiCo Engineering CMMS (Laravel 12 + Filament v4)  
**Version:** 1.0  
**Last Updated:** November 26, 2025  
**Author:** Nandang Wijaya

---

## ğŸ“‘ Table of Contents

1. [System Overview](#1-system-overview)
2. [User Roles & Access](#2-user-roles--access)
3. [PM Schedule Workflow](#3-pm-schedule-workflow)
4. [PM Execution Workflow](#4-pm-execution-workflow)
5. [Work Order Workflow](#5-work-order-workflow)
6. [Inventory Management Workflow](#6-inventory-management-workflow)
7. [Barcode System Workflow](#7-barcode-system-workflow)
8. [Stock Alert Workflow](#8-stock-alert-workflow)
9. [Auto-Calculation Workflows](#9-auto-calculation-workflows)
10. [Compliance Tracking Workflow](#10-compliance-tracking-workflow)
11. [Data Flow Diagrams](#11-data-flow-diagrams)
12. [Cascade Dropdown Logic](#12-cascade-dropdown-logic)
13. [System Integration Points](#13-system-integration-points)
14. [Performance Optimization Guidelines](#14-performance-optimization-guidelines)
15. [Security Best Practices](#15-security-best-practices)

---

## 1. System Overview

### 1.1 System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PEPSICO CMMS SYSTEM ARCHITECTURE                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Users      â”‚â”€â”€â”€â–¶â”‚   Filament    â”‚â”€â”€â”€â–¶â”‚   Database      â”‚  â”‚
â”‚  â”‚  (6 Roles)   â”‚    â”‚   Resources   â”‚    â”‚   MySQL 8.0     â”‚  â”‚
â”‚  â”‚  + Barcode   â”‚    â”‚   + Widgets   â”‚    â”‚   30 Tables     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                               â”‚                      â”‚            â”‚
â”‚                               â–¼                      â–¼            â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                      â”‚   Services     â”‚    â”‚  Power BI       â”‚  â”‚
â”‚                      â”‚   - PmService  â”‚    â”‚  (Analytics)    â”‚  â”‚
â”‚                      â”‚   - WoService  â”‚    â”‚  6 Views        â”‚  â”‚
â”‚                      â”‚   - InventoryServiceâ”‚ â”‚               â”‚  â”‚
â”‚                      â”‚   - CostServiceâ”‚    â”‚                 â”‚  â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                               â”‚                                  â”‚
â”‚                               â–¼                                  â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                      â”‚   Observers    â”‚                         â”‚
â”‚                      â”‚   - WorkOrderObserver                    â”‚
â”‚                      â”‚   - PmExecutionObserver                  â”‚
â”‚                      â”‚   - PartObserver                         â”‚
â”‚                      â”‚   - InventoryObserver                    â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Core Modules

1. **Master Data** - Areas, Sub Areas, Assets, Sub Assets, Parts, Users
2. **PM Schedule** - Preventive maintenance scheduling (7 frequencies)
3. **PM Execution** - PM execution with checklist, compliance tracking
4. **Work Order** - Corrective maintenance with 7-stage lifecycle
5. **Inventory** - Stock management with two-way sync (Parts â†” Inventories)
6. **Cost Tracking** - Labor, parts, downtime costs (WO + PM)
7. **Barcode System** - QR code-based WO submission (no login required)
8. **Activity Logging** - Complete audit trail for all actions
9. **Reporting** - Power BI integration with 6 optimized views

---

## 2. User Roles & Access

### 2.1 Role Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SUPER ADMIN                              â”‚
â”‚  - Full access to all modules                                  â”‚
â”‚  - User management (create, edit, import Excel)                â”‚
â”‚  - System configuration (roles, permissions)                   â”‚
â”‚  - View all departments & data                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    MANAGER     â”‚              â”‚    TECH STORE        â”‚
â”‚ - View all WO  â”‚              â”‚ - Inventory mgmt     â”‚
â”‚ - Assign PM    â”‚              â”‚ - Stock alerts       â”‚
â”‚ - Approve WO   â”‚              â”‚ - Parts movements    â”‚
â”‚ - View reports â”‚              â”‚ - Restock parts      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ASISTEN MANAGER                â”‚
â”‚  (Mechanic / Electric / Utility)      â”‚
â”‚  - Assign PM to technicians (dept)    â”‚
â”‚  - View dept PM & WO                  â”‚
â”‚  - Approve dept WO                    â”‚
â”‚  - Assign WO processes to technicians â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          TECHNICIAN                   â”‚
â”‚  (Mechanic / Electric / Utility)      â”‚
â”‚  - Execute assigned PM                â”‚
â”‚  - Process assigned WO                â”‚
â”‚  - Record parts usage                 â”‚
â”‚  - Upload images/attachments          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          OPERATOR                   â”‚
â”‚  - Submit WO via barcode/QR code    â”‚
â”‚  - No login required (token-based)  â”‚
â”‚  - Read-only asset info             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚        TECHNICIAN                   â”‚
â”‚  (Mechanic / Electric / Utility)    â”‚
â”‚  â­ View ONLY their own PM (GPID)   â”‚
â”‚  - Execute assigned PM              â”‚
â”‚  - Process dept WO                  â”‚
â”‚  - Record parts usage               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          OPERATOR                   â”‚
â”‚  - Submit WO via barcode (no login) â”‚
â”‚  - View own submitted WO            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Access Matrix

| Module | Super Admin | Manager | Asisten Mgr | Technician | Tech Store | Operator |
|--------|-------------|---------|-------------|------------|------------|----------|
| **Master Data** | âœ… CRUD | âœ… CRUD | âŒ | âŒ | âŒ | âŒ |
| **Users** | âœ… CRUD | âœ… CRUD | âŒ | âŒ | âŒ | âŒ |
| **PM Schedule** | âœ… All | âœ… All | âœ… Dept | â­ **Own Only** | âŒ | âŒ |
| **PM Execution** | âœ… All | âœ… All | âœ… Dept | âœ… Own | âŒ | âŒ |
| **Work Order** | âœ… All | âœ… All | âœ… Dept | âœ… Dept | âŒ | âœ… Submit |
| **Inventory** | âœ… CRUD | âœ… CRUD | âŒ | âŒ | âœ… CRUD | âŒ |
| **Stock Alert** | âœ… All | âœ… All | âŒ | âŒ | âœ… All | âŒ |
| **Barcode Token** | âœ… CRUD | âœ… CRUD | âŒ | âŒ | âŒ | âŒ |
| **Reports** | âœ… All | âœ… All | âœ… Dept | âœ… Own | âœ… Inventory | âŒ |

---

## 3. PM Schedule Workflow

### 3.1 PM Assignment Flow (Asisten Manager)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: Asisten Manager Creates PM Schedule                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Fill PM Schedule Form:                                       â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  â€¢ Code: PM-202511-001 (auto-generated)                      â”‚
â”‚  â€¢ Title: "Weekly PM - Fryer EP Line"                        â”‚
â”‚  â€¢ Description: "Check oil, inspect belts, measure temp"     â”‚
â”‚                                                               â”‚
â”‚  Equipment Selection (Cascade):                              â”‚
â”‚  â€¢ Area: Proses                                              â”‚
â”‚    â””â”€â–¶ Sub Area: EP                                          â”‚
â”‚         â””â”€â–¶ Asset: Processing                                â”‚
â”‚              â””â”€â–¶ Sub Asset: Fryer                            â”‚
â”‚                                                               â”‚
â”‚  Schedule Configuration:                                     â”‚
â”‚  â€¢ Type: Weekly / Running Hours / Cycle                      â”‚
â”‚  â€¢ Frequency: Every 1 week                                   â”‚
â”‚  â€¢ Day: Monday                                               â”‚
â”‚  â€¢ Duration: 120 minutes                                     â”‚
â”‚                                                               â”‚
â”‚  Assignment:                                                 â”‚
â”‚  â€¢ Department: Mechanic                                      â”‚
â”‚  â€¢ Assigned To: Agus Technician Mechanic (TCM001)           â”‚
â”‚  â€¢ Assigned By: ASM001 (auto)                                â”‚
â”‚                                                               â”‚
â”‚  Checklist Items:                                            â”‚
â”‚  1. â˜ Check oil level (Checkbox - Required)                 â”‚
â”‚  2. â˜ Inspect belts (Checkbox - Required)                   â”‚
â”‚  3. ğŸ“ Temperature reading (Input - Required)                â”‚
â”‚  4. ğŸ“· Equipment condition photo (Photo - Required)          â”‚
â”‚  5. ğŸ”½ Belt condition (Dropdown: OK/NG/NA - Required)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: PM Schedule Saved to Database                       â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  pm_schedules table:                                          â”‚
â”‚  â€¢ id: 1                                                      â”‚
â”‚  â€¢ code: PM-202511-001                                        â”‚
â”‚  â€¢ assigned_to_gpid: TCM001 â­                               â”‚
â”‚  â€¢ assigned_by_gpid: ASM001                                  â”‚
â”‚  â€¢ department: mechanic                                      â”‚
â”‚  â€¢ status: active                                            â”‚
â”‚  â€¢ is_active: true                                           â”‚
â”‚                                                               â”‚
â”‚  pm_checklist_items table (5 items created)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: Notification (Optional)                             â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  ğŸ“§ Email to TCM001:                                          â”‚
â”‚  "You have been assigned PM-202511-001"                      â”‚
â”‚  "Schedule: Every Monday, 120 minutes"                       â”‚
â”‚  "Equipment: Fryer EP Line"                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Personalized PM View (Technician)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Technician TCM001 Logs In                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Filament executes PERSONALIZED QUERY:                       â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  public static function getEloquentQuery(): Builder          â”‚
â”‚  {                                                            â”‚
â”‚      $query = parent::getEloquentQuery();                    â”‚
â”‚      $user = auth()->user();                                 â”‚
â”‚                                                               â”‚
â”‚      if ($user->role === 'technician') {                     â”‚
â”‚          return $query->where('assigned_to_gpid',            â”‚
â”‚                               $user->gpid); â­               â”‚
â”‚      }                                                        â”‚
â”‚      ...                                                      â”‚
â”‚  }                                                            â”‚
â”‚                                                               â”‚
â”‚  SQL Query executed:                                         â”‚
â”‚  SELECT * FROM pm_schedules                                  â”‚
â”‚  WHERE assigned_to_gpid = 'TCM001'                           â”‚
â”‚  AND status = 'active'                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard: "My PM Schedules"                                â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  âœ… PM-202511-001 - Weekly PM - Fryer EP Line                â”‚
â”‚     Schedule: Monday, 120 min                                â”‚
â”‚     Status: Active                                           â”‚
â”‚     [Execute PM]                                             â”‚
â”‚                                                               â”‚
â”‚  âœ… PM-202511-005 - Weekly PM - Mixer EP Line                â”‚
â”‚     Schedule: Tuesday, 90 min                                â”‚
â”‚     Status: Active                                           â”‚
â”‚     [Execute PM]                                             â”‚
â”‚                                                               â”‚
â”‚  âŒ PM-202511-010 (Assigned to TCM002) â†’ NOT VISIBLE         â”‚
â”‚  âŒ PM-202511-015 (Assigned to TCE001) â†’ NOT VISIBLE         â”‚
â”‚                                                               â”‚
â”‚  TCM001 ONLY sees PM assigned to their GPID!                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 PM Schedule Visibility by Role

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER: TCM001 (Technician Mechanic)                        â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  Query: WHERE assigned_to_gpid = 'TCM001'                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ… PM-001 - Fryer (TCM001)                           â”‚ â”‚
â”‚  â”‚ âœ… PM-005 - Mixer (TCM001)                           â”‚ â”‚
â”‚  â”‚ âŒ PM-010 - VMM (TCM002) - HIDDEN                    â”‚ â”‚
â”‚  â”‚ âŒ PM-015 - Compressor (TCU001) - HIDDEN             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER: ASM001 (Asisten Manager Mechanic)                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  Query: WHERE department = 'mechanic'                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ… PM-001 - Fryer (TCM001)                           â”‚ â”‚
â”‚  â”‚ âœ… PM-005 - Mixer (TCM001)                           â”‚ â”‚
â”‚  â”‚ âœ… PM-010 - VMM (TCM002)                             â”‚ â”‚
â”‚  â”‚ âœ… PM-020 - Extruder (TCM003)                        â”‚ â”‚
â”‚  â”‚ âŒ PM-015 - Compressor (TCU001) - HIDDEN (Utility)  â”‚ â”‚
â”‚  â”‚ âŒ PM-025 - Panel (TCE001) - HIDDEN (Electric)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER: MGR001 (Manager) / SA001 (Super Admin)              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  Query: (No filter - see all)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ… ALL PM SCHEDULES (All departments, all techs)    â”‚ â”‚
â”‚  â”‚    - Mechanic: PM-001, PM-005, PM-010, PM-020       â”‚ â”‚
â”‚  â”‚    - Electric: PM-015, PM-025, PM-030                â”‚ â”‚
â”‚  â”‚    - Utility: PM-035, PM-040, PM-045                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. PM Execution Workflow

### 4.1 Complete PM Execution Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: Technician Opens "My PM Schedules"                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: Select PM to Execute                                â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  PM-202511-001 - Weekly PM - Fryer EP Line                   â”‚
â”‚  Scheduled: Monday, 2025-11-18                               â”‚
â”‚  Duration: 120 minutes                                       â”‚
â”‚  [Execute PM] â—€â”€â”€ Click                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: Fill PM Execution Form                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  PM Schedule: PM-202511-001 (disabled)                       â”‚
â”‚  Scheduled Date: 2025-11-18                                  â”‚
â”‚  Status: In Progress                                         â”‚
â”‚                                                               â”‚
â”‚  Execution Time:                                             â”‚
â”‚  â€¢ Start Time: 2025-11-18 08:00 (auto filled)               â”‚
â”‚  â€¢ End Time: 2025-11-18 10:00                                â”‚
â”‚  â€¢ Duration: 120 minutes (calculated)                        â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Checklist Items (Dynamic from PM Schedule):            â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ 1. â˜‘ Check oil level (Checked)                         â”‚ â”‚
â”‚  â”‚ 2. â˜‘ Inspect belts (Checked)                           â”‚ â”‚
â”‚  â”‚ 3. ğŸ“ Temperature: 85Â°C                                 â”‚ â”‚
â”‚  â”‚ 4. ğŸ“· [photo-1.jpg uploaded]                           â”‚ â”‚
â”‚  â”‚ 5. ğŸ”½ Belt condition: OK                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Parts Used:                                             â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ + Add Part                                              â”‚ â”‚
â”‚  â”‚   Part: MEC-BELT-001 - V-Belt A-50                     â”‚ â”‚
â”‚  â”‚   Quantity: 2                                           â”‚ â”‚
â”‚  â”‚   Unit Price: IDR 150,000                              â”‚ â”‚
â”‚  â”‚   Cost: IDR 300,000 (calculated)                       â”‚ â”‚
â”‚  â”‚   Notes: Replaced worn belts                           â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ + Add Part                                              â”‚ â”‚
â”‚  â”‚   Part: CON-OIL-001 - Hydraulic Oil                    â”‚ â”‚
â”‚  â”‚   Quantity: 5 liter                                    â”‚ â”‚
â”‚  â”‚   Unit Price: IDR 45,000                               â”‚ â”‚
â”‚  â”‚   Cost: IDR 225,000                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  Additional Information:                                     â”‚
â”‚  â€¢ Notes: "All checks passed, belts replaced"               â”‚
â”‚  â€¢ Photos: [overall-condition.jpg]                          â”‚
â”‚                                                               â”‚
â”‚  Executed By: TCM001 (auto)                                  â”‚
â”‚                                                               â”‚
â”‚  [Complete PM] â—€â”€â”€ Click                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: AUTO-PROCESSING ON SAVE                             â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  A. Calculate Duration:                                      â”‚
â”‚     duration = actual_end - actual_start                     â”‚
â”‚     duration = 10:00 - 08:00 = 120 minutes âœ…                â”‚
â”‚                                                               â”‚
â”‚  B. Check Compliance:                                        â”‚
â”‚     deadline = scheduled_date + 1 day                        â”‚
â”‚     deadline = 2025-11-19                                    â”‚
â”‚     actual_end = 2025-11-18 10:00                            â”‚
â”‚     is_on_time = actual_end <= deadline = TRUE âœ…            â”‚
â”‚     compliance_status = "on_time"                            â”‚
â”‚                                                               â”‚
â”‚  C. Calculate PM Cost:                                       â”‚
â”‚     Labour Cost:                                             â”‚
â”‚       = (duration / 60) * hourly_rate                        â”‚
â”‚       = (120 / 60) * 50,000                                  â”‚
â”‚       = IDR 100,000                                          â”‚
â”‚                                                               â”‚
â”‚     Parts Cost:                                              â”‚
â”‚       = MEC-BELT-001 (300,000) + CON-OIL-001 (225,000)      â”‚
â”‚       = IDR 525,000                                          â”‚
â”‚                                                               â”‚
â”‚     Overhead Cost (10%):                                     â”‚
â”‚       = (100,000 + 525,000) * 0.1                            â”‚
â”‚       = IDR 62,500                                           â”‚
â”‚                                                               â”‚
â”‚     Total Cost:                                              â”‚
â”‚       = 100,000 + 525,000 + 62,500                           â”‚
â”‚       = IDR 687,500 âœ…                                       â”‚
â”‚                                                               â”‚
â”‚  D. Deduct Parts from Inventory:                            â”‚
â”‚     For each part used:                                      â”‚
â”‚       1. MEC-BELT-001:                                       â”‚
â”‚          current_stock: 25 â†’ 23 (25 - 2)                    â”‚
â”‚       2. CON-OIL-001:                                        â”‚
â”‚          current_stock: 500 â†’ 495 (500 - 5)                 â”‚
â”‚                                                               â”‚
â”‚  E. Create Inventory Movements:                             â”‚
â”‚     Movement 1:                                              â”‚
â”‚       part_id: MEC-BELT-001                                  â”‚
â”‚       movement_type: out                                     â”‚
â”‚       quantity: 2                                            â”‚
â”‚       quantity_before: 25                                    â”‚
â”‚       quantity_after: 23                                     â”‚
â”‚       reference_type: pm_execution                           â”‚
â”‚       reference_id: 1                                        â”‚
â”‚       performed_by_gpid: TCM001                              â”‚
â”‚                                                               â”‚
â”‚     Movement 2:                                              â”‚
â”‚       part_id: CON-OIL-001                                   â”‚
â”‚       movement_type: out                                     â”‚
â”‚       quantity: 5                                            â”‚
â”‚       quantity_before: 500                                   â”‚
â”‚       quantity_after: 495                                    â”‚
â”‚       reference_type: pm_execution                           â”‚
â”‚       reference_id: 1                                        â”‚
â”‚                                                               â”‚
â”‚  F. Check Stock Alerts:                                      â”‚
â”‚     For each part:                                           â”‚
â”‚       if (current_stock <= min_stock) {                      â”‚
â”‚           Create StockAlert                                  â”‚
â”‚           Notify Tech Store                                  â”‚
â”‚       }                                                      â”‚
â”‚                                                               â”‚
â”‚  G. Update PM Compliance Stats:                             â”‚
â”‚     Update weekly/monthly compliance percentages             â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 5: Database Records Created                            â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  pm_executions:                                              â”‚
â”‚    id: 1                                                      â”‚
â”‚    pm_schedule_id: 1                                         â”‚
â”‚    executed_by_gpid: TCM001                                  â”‚
â”‚    scheduled_date: 2025-11-18                                â”‚
â”‚    actual_start: 2025-11-18 08:00                            â”‚
â”‚    actual_end: 2025-11-18 10:00                              â”‚
â”‚    duration: 120                                             â”‚
â”‚    checklist_data: {...JSON...}                              â”‚
â”‚    status: completed                                         â”‚
â”‚    compliance_status: on_time                                â”‚
â”‚    is_on_time: true                                          â”‚
â”‚                                                               â”‚
â”‚  pm_parts_usage: (2 records)                                 â”‚
â”‚    - MEC-BELT-001, quantity: 2, cost: 300000                 â”‚
â”‚    - CON-OIL-001, quantity: 5, cost: 225000                  â”‚
â”‚                                                               â”‚
â”‚  pm_costs:                                                   â”‚
â”‚    labour_cost: 100000                                       â”‚
â”‚    parts_cost: 525000                                        â”‚
â”‚    overhead_cost: 62500                                      â”‚
â”‚    total_cost: 687500                                        â”‚
â”‚                                                               â”‚
â”‚  inventory_movements: (2 records created)                    â”‚
â”‚  parts: (stock updated)                                      â”‚
â”‚  stock_alerts: (created if needed)                           â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Work Order Workflow

### 5.1 WO Submission via Barcode (Operator - No Login)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: Operator Scans QR Code                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  ğŸ“± Smartphone Camera â†’ QR Code on Equipment                 â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚   â–ˆâ–€â–€â–€â–€â–€â–ˆ â–€â–„â–ˆ   â”‚                                         â”‚
â”‚  â”‚   â–ˆ â–ˆâ–ˆâ–ˆ â–ˆ  â–„â–€   â”‚  Scan with phone camera                â”‚
â”‚  â”‚   â–ˆâ–„â–„â–„â–„â–„â–ˆ â–ˆ â–ˆ   â”‚                                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                                                               â”‚
â”‚  URL: https://cmms.com/barcode/wo/{token}                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: System Validates Token                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  BarcodeToken::validateToken($token)                         â”‚
â”‚  â”œâ”€ Token exists? âœ…                                         â”‚
â”‚  â”œâ”€ is_active = true? âœ…                                     â”‚
â”‚  â””â”€ Not soft deleted? âœ…                                     â”‚
â”‚                                                               â”‚
â”‚  If valid â†’ Show WO Form                                     â”‚
â”‚  If invalid â†’ 404 Error                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: Fill Work Order Form (PUBLIC - NO LOGIN)            â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Operator Information:                                       â”‚
â”‚  â€¢ GPID: OP001                                               â”‚
â”‚  â€¢ Nama Lengkap: Nana Operator                               â”‚
â”‚  â€¢ Shift: 1                                                  â”‚
â”‚                                                               â”‚
â”‚  Problem Details:                                            â”‚
â”‚  â€¢ Problem Type: Breakdown â—€â”€â”€ Select                        â”‚
â”‚  â€¢ Assign To: Mechanic                                       â”‚
â”‚  â€¢ Description: "Fryer tidak bisa start, ada bunyi aneh"    â”‚
â”‚                                                               â”‚
â”‚  Equipment Location (CASCADE DROPDOWN):                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Area: [Proses â–¼]                                        â”‚ â”‚
â”‚  â”‚   â†“ loads Sub Areas for Proses                         â”‚ â”‚
â”‚  â”‚ Sub Area: [EP â–¼]                                        â”‚ â”‚
â”‚  â”‚   â†“ loads Assets for EP                                â”‚ â”‚
â”‚  â”‚ Asset: [Processing â–¼]                                   â”‚ â”‚
â”‚  â”‚   â†“ loads Sub Assets for Processing                    â”‚ â”‚
â”‚  â”‚ Sub Asset: [Fryer â–¼]                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  Photos:                                                     â”‚
â”‚  ğŸ“· [Upload Photo 1] - fryer-error.jpg                       â”‚
â”‚  ğŸ“· [Upload Photo 2] - control-panel.jpg                     â”‚
â”‚  ğŸ“· [Upload Photo 3] - (optional)                            â”‚
â”‚                                                               â”‚
â”‚  [Submit Work Order] â—€â”€â”€ Click                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: System Creates WO                                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  work_orders:                                                â”‚
â”‚    wo_number: WO-202511-0001 (auto-generated)                â”‚
â”‚    created_by_gpid: OP001                                    â”‚
â”‚    operator_name: Nana Operator                              â”‚
â”‚    shift: 1                                                  â”‚
â”‚    problem_type: breakdown                                   â”‚
â”‚    assign_to: mechanic                                       â”‚
â”‚    area_id: 1 (Proses)                                       â”‚
â”‚    sub_area_id: 1 (EP)                                       â”‚
â”‚    asset_id: 1 (Processing)                                  â”‚
â”‚    sub_asset_id: 1 (Fryer)                                   â”‚
â”‚    description: "Fryer tidak bisa start..."                  â”‚
â”‚    photos: ["fryer-error.jpg", "control-panel.jpg"]         â”‚
â”‚    status: submitted                                         â”‚
â”‚    priority: critical (auto from breakdown)                  â”‚
â”‚                                                               â”‚
â”‚  Increment barcode token usage_count                         â”‚
â”‚  Update barcode token last_used_at                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 5: Notification to Technician                          â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  ğŸ“§ Email to Mechanic Department:                            â”‚
â”‚  Subject: "ğŸš¨ New Critical WO: WO-202511-0001"               â”‚
â”‚  Body:                                                       â”‚
â”‚    WO Number: WO-202511-0001                                 â”‚
â”‚    Priority: CRITICAL                                        â”‚
â”‚    Problem: Breakdown                                        â”‚
â”‚    Equipment: Fryer EP Line                                  â”‚
â”‚    Operator: Nana (Shift 1)                                  â”‚
â”‚    Time: 2025-11-18 14:30                                    â”‚
â”‚                                                               â”‚
â”‚  ğŸ”” In-app notification in Filament                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SUCCESS PAGE                                                â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  âœ… Work Order berhasil dibuat!                              â”‚
â”‚                                                               â”‚
â”‚  WO Number: WO-202511-0001                                   â”‚
â”‚  Status: Submitted                                           â”‚
â”‚  Priority: Critical                                          â”‚
â”‚                                                               â”‚
â”‚  technician akan segera menindaklanjuti.                        â”‚
â”‚  Terima kasih!                                               â”‚
â”‚                                                               â”‚
â”‚  [Submit Another WO]                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 WO Processing by Technician

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WO-202511-0001 - Fryer Breakdown                            â”‚
â”‚  Status: Submitted â†’ Reviewed â†’ Approved â†’ In Progress       â”‚
â”‚          â†’ Completed â†’ Closed                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STAGE 1: REVIEW
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Technician clicks [Review]         â”‚
â”‚ â†“                                   â”‚
â”‚ status = 'reviewed'                 â”‚
â”‚ reviewed_at = now()                 â”‚
â”‚ â†“                                   â”‚
â”‚ wo_processes:                       â”‚
â”‚   action: review                    â”‚
â”‚   performed_by_gpid: TCM001         â”‚
â”‚   timestamp: 2025-11-18 14:35       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STAGE 2: APPROVE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Technician clicks [Approve]        â”‚
â”‚ â†“                                   â”‚
â”‚ status = 'approved'                 â”‚
â”‚ approved_at = now()                 â”‚
â”‚ â†“                                   â”‚
â”‚ wo_processes:                       â”‚
â”‚   action: approve                   â”‚
â”‚   performed_by_gpid: TCM001         â”‚
â”‚   timestamp: 2025-11-18 14:36       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STAGE 3: START WORK
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Technician clicks [Start Work]     â”‚
â”‚ â†“                                   â”‚
â”‚ status = 'in_progress'              â”‚
â”‚ started_at = now()                  â”‚
â”‚ â†“                                   â”‚
â”‚ wo_processes:                       â”‚
â”‚   action: start                     â”‚
â”‚   performed_by_gpid: TCM001         â”‚
â”‚   timestamp: 2025-11-18 14:40       â”‚
â”‚   downtime_start: 2025-11-18 14:40  â”‚ â±ï¸ START DOWNTIME
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STAGE 4: HOLD (OPTIONAL)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Technician clicks [Hold Work]      â”‚
â”‚ â†“                                   â”‚
â”‚ status = 'on_hold'                  â”‚
â”‚ â†“                                   â”‚
â”‚ wo_processes:                       â”‚
â”‚   action: hold                      â”‚
â”‚   performed_by_gpid: TCM001         â”‚
â”‚   timestamp: 2025-11-18 15:00       â”‚
â”‚   downtime_end: 2025-11-18 15:00    â”‚
â”‚   downtime_duration: 20 min         â”‚
â”‚                                     â”‚
â”‚ (Waiting for spare parts)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STAGE 5: CONTINUE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Technician clicks [Continue]       â”‚
â”‚ â†“                                   â”‚
â”‚ status = 'in_progress'              â”‚
â”‚ â†“                                   â”‚
â”‚ wo_processes:                       â”‚
â”‚   action: continue                  â”‚
â”‚   performed_by_gpid: TCM001         â”‚
â”‚   timestamp: 2025-11-18 15:30       â”‚
â”‚   downtime_start: 2025-11-18 15:30  â”‚ â±ï¸ RESUME DOWNTIME
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STAGE 6: COMPLETE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Technician clicks [Complete]                                â”‚
â”‚ â†“                                                            â”‚
â”‚ Modal Form:                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Parts Used:                                              â”‚ â”‚
â”‚ â”‚ + MEC-BEAR-001 - Bearing, Qty: 2, Cost: 150,000        â”‚ â”‚
â”‚ â”‚ + CON-GREASE-001 - Grease, Qty: 1, Cost: 75,000        â”‚ â”‚
â”‚ â”‚                                                          â”‚ â”‚
â”‚ â”‚ Solution/Notes:                                          â”‚ â”‚
â”‚ â”‚ "Replaced worn bearing, lubricated mechanism,           â”‚ â”‚
â”‚ â”‚  tested OK, no abnormal sound"                          â”‚ â”‚
â”‚ â”‚                                                          â”‚ â”‚
â”‚ â”‚ Result Photos:                                           â”‚ â”‚
â”‚ â”‚ ğŸ“· [bearing-new.jpg]                                    â”‚ â”‚
â”‚ â”‚ ğŸ“· [test-result.jpg]                                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚ [Submit] â—€â”€â”€ Click                                          â”‚
â”‚ â†“                                                            â”‚
â”‚ status = 'completed'                                         â”‚
â”‚ completed_at = now()                                         â”‚
â”‚ â†“                                                            â”‚
â”‚ wo_processes:                                                â”‚
â”‚   action: complete                                           â”‚
â”‚   performed_by_gpid: TCM001                                  â”‚
â”‚   timestamp: 2025-11-18 16:00                                â”‚
â”‚   downtime_end: 2025-11-18 16:00                             â”‚ â±ï¸ END DOWNTIME
â”‚   notes: "Replaced worn bearing..."                          â”‚
â”‚ â†“                                                            â”‚
â”‚ AUTO-CALCULATIONS:                                           â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                              â”‚
â”‚ 1. Calculate Total Downtime:                                â”‚
â”‚    Start 1: 14:40 â†’ Hold: 15:00 = 20 min                   â”‚
â”‚    Continue: 15:30 â†’ End: 16:00 = 30 min                    â”‚
â”‚    Total Downtime = 20 + 30 = 50 minutes âœ…                 â”‚
â”‚                                                              â”‚
â”‚ 2. Calculate MTTR:                                          â”‚
â”‚    MTTR = completed_at - created_at                          â”‚
â”‚    MTTR = 16:00 - 14:30 = 90 minutes âœ…                     â”‚
â”‚                                                              â”‚
â”‚ 3. Deduct Parts from Inventory:                            â”‚
â”‚    MEC-BEAR-001: 50 â†’ 48 (50 - 2)                          â”‚
â”‚    CON-GREASE-001: 80 â†’ 79 (80 - 1)                        â”‚
â”‚                                                              â”‚
â”‚ 4. Create Inventory Movements: (2 records)                  â”‚
â”‚                                                              â”‚
â”‚ 5. Calculate WO Cost:                                       â”‚
â”‚    Labour Cost = (90 / 60) * 50,000 = 75,000               â”‚
â”‚    Parts Cost = 150,000 + 75,000 = 225,000                  â”‚
â”‚    Total Cost = 75,000 + 225,000 = 300,000 âœ…              â”‚
â”‚                                                              â”‚
â”‚ 6. Check Stock Alerts (if parts below min_stock)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STAGE 7: CLOSE (Manager/Asisten Manager)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Manager clicks [Close WO]          â”‚
â”‚ â†“                                   â”‚
â”‚ status = 'closed'                   â”‚
â”‚ closed_at = now()                   â”‚
â”‚ â†“                                   â”‚
â”‚ wo_processes:                       â”‚
â”‚   action: close                     â”‚
â”‚   performed_by_gpid: ASM001         â”‚
â”‚   timestamp: 2025-11-18 16:05       â”‚
â”‚ â†“                                   â”‚
â”‚ WO COMPLETE âœ…                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 Downtime Calculation Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DOWNTIME CALCULATION ALGORITHM                               â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Process History:                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 14:30 - WO Created                                      â”‚ â”‚
â”‚  â”‚ 14:35 - Review                                          â”‚ â”‚
â”‚  â”‚ 14:36 - Approve                                         â”‚ â”‚
â”‚  â”‚ 14:40 - Start (downtime_start = 14:40)                 â”‚ â”‚
â”‚  â”‚ 15:00 - Hold  (downtime_end = 15:00)                   â”‚ â”‚
â”‚  â”‚         Duration = 15:00 - 14:40 = 20 min               â”‚ â”‚
â”‚  â”‚ 15:30 - Continue (downtime_start = 15:30)              â”‚ â”‚
â”‚  â”‚ 16:00 - Complete (downtime_end = 16:00)                â”‚ â”‚
â”‚  â”‚         Duration = 16:00 - 15:30 = 30 min               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  Total Downtime Calculation:                                 â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  function calculateDowntime($processes) {                    â”‚
â”‚      $totalDowntime = 0;                                     â”‚
â”‚      $startTime = null;                                      â”‚
â”‚                                                               â”‚
â”‚      foreach ($processes as $process) {                      â”‚
â”‚          switch ($process->action) {                         â”‚
â”‚              case 'start':                                   â”‚
â”‚              case 'continue':                                â”‚
â”‚                  $startTime = $process->timestamp;           â”‚
â”‚                  break;                                      â”‚
â”‚                                                               â”‚
â”‚              case 'hold':                                    â”‚
â”‚              case 'complete':                                â”‚
â”‚                  if ($startTime) {                           â”‚
â”‚                      $duration = $startTime->diffInMinutes(  â”‚
â”‚                          $process->timestamp                 â”‚
â”‚                      );                                      â”‚
â”‚                      $totalDowntime += $duration;            â”‚
â”‚                  }                                           â”‚
â”‚                  break;                                      â”‚
â”‚          }                                                   â”‚
â”‚      }                                                       â”‚
â”‚                                                               â”‚
â”‚      return $totalDowntime;                                  â”‚
â”‚  }                                                           â”‚
â”‚                                                               â”‚
â”‚  Result: Total Downtime = 50 minutes âœ…                      â”‚
â”‚                                                               â”‚
â”‚  MTTR (Mean Time To Repair):                                 â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  MTTR = completed_at - created_at                            â”‚
â”‚  MTTR = 16:00 - 14:30                                        â”‚
â”‚  MTTR = 90 minutes âœ…                                        â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Inventory Management Workflow

### 6.1 Automatic Inventory Deduction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TRIGGER: PM Execution or WO Completion with Parts Used      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: InventoryService::deductPart()                      â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Input:                                                      â”‚
â”‚  â€¢ part_id: 1 (MEC-BELT-001)                                 â”‚
â”‚  â€¢ quantity: 2                                               â”‚
â”‚  â€¢ reference_type: 'pm_execution'                            â”‚
â”‚  â€¢ reference_id: 1                                           â”‚
â”‚                                                               â”‚
â”‚  Get Part:                                                   â”‚
â”‚  $part = Part::find(1);                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ part_number: MEC-BELT-001                               â”‚ â”‚
â”‚  â”‚ name: V-Belt A-50                                       â”‚ â”‚
â”‚  â”‚ current_stock: 25 â—€â”€â”€ BEFORE                            â”‚ â”‚
â”‚  â”‚ min_stock: 5                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: Update Part Stock                                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  $part->decrement('current_stock', $quantity);               â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ current_stock: 25 â†’ 23 âœ…                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: Create Inventory Movement Record                    â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  InventoryMovement::create([                                 â”‚
â”‚      'part_id' => 1,                                         â”‚
â”‚      'movement_type' => 'out',                               â”‚
â”‚      'quantity' => 2,                                        â”‚
â”‚      'quantity_before' => 25,                                â”‚
â”‚      'quantity_after' => 23,                                 â”‚
â”‚      'reference_type' => 'pm_execution',                     â”‚
â”‚      'reference_id' => 1,                                    â”‚
â”‚      'performed_by_gpid' => 'TCM001',                        â”‚
â”‚      'notes' => 'Auto deduct from PM-202511-001',            â”‚
â”‚  ]);                                                         â”‚
â”‚                                                               â”‚
â”‚  âœ… Movement record created                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: Check Stock Level & Create Alert                    â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  if ($part->current_stock <= $part->min_stock) {             â”‚
â”‚                                                               â”‚
â”‚      Current Stock: 23                                       â”‚
â”‚      Min Stock: 5                                            â”‚
â”‚      23 <= 5? NO â†’ No alert needed âœ…                        â”‚
â”‚  }                                                           â”‚
â”‚                                                               â”‚
â”‚  Example: If current_stock = 4 and min_stock = 5:           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Stock Alert Created:                                    â”‚ â”‚
â”‚  â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚ â”‚
â”‚  â”‚ part_id: 1                                              â”‚ â”‚
â”‚  â”‚ alert_type: 'low_stock'                                 â”‚ â”‚
â”‚  â”‚ triggered_at: now()                                     â”‚ â”‚
â”‚  â”‚ is_resolved: false                                      â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ ğŸ“§ Email to Tech Store:                                 â”‚ â”‚
â”‚  â”‚ Subject: "âš ï¸ Low Stock Alert: MEC-BELT-001"            â”‚ â”‚
â”‚  â”‚ Current Stock: 4                                        â”‚ â”‚
â”‚  â”‚ Min Stock: 5                                            â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ ğŸ”” Navigation Badge: [Stock Alerts (1)]                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Manual Stock Addition (Restock)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: Tech Store Opens Inventory                          â”‚
â”‚  Clicks [Add Stock] on MEC-BELT-001                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: Fill Add Stock Form                                 â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Modal Form:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Quantity to Add: 50                                     â”‚ â”‚
â”‚  â”‚ Notes: "PO#2024-11-001, Supplier: PT ABC"              â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ [Add Stock]                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: Update Inventory                                    â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  $quantityBefore = 4;                                        â”‚
â”‚  $quantityToAdd = 50;                                        â”‚
â”‚  $quantityAfter = 4 + 50 = 54;                               â”‚
â”‚                                                               â”‚
â”‚  $part->update([                                             â”‚
â”‚      'current_stock' => 54,                                  â”‚
â”‚      'last_restocked_at' => now(),                           â”‚
â”‚  ]);                                                         â”‚
â”‚                                                               â”‚
â”‚  âœ… Stock updated: 4 â†’ 54                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: Create Inventory Movement                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  InventoryMovement::create([                                 â”‚
â”‚      'part_id' => 1,                                         â”‚
â”‚      'movement_type' => 'in', âœ…                             â”‚
â”‚      'quantity' => 50,                                       â”‚
â”‚      'quantity_before' => 4,                                 â”‚
â”‚      'quantity_after' => 54,                                 â”‚
â”‚      'reference_type' => 'manual',                           â”‚
â”‚      'performed_by_gpid' => 'TS001',                         â”‚
â”‚      'notes' => 'PO#2024-11-001, Supplier: PT ABC',          â”‚
â”‚  ]);                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 5: Resolve Stock Alert (if exists)                     â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  if ($quantityAfter >= $part->min_stock) {                   â”‚
â”‚      54 >= 5? YES âœ…                                         â”‚
â”‚                                                               â”‚
â”‚      StockAlert::where('part_id', 1)                         â”‚
â”‚          ->where('is_resolved', false)                       â”‚
â”‚          ->update([                                          â”‚
â”‚              'is_resolved' => true,                          â”‚
â”‚              'resolved_at' => now(),                         â”‚
â”‚              'resolved_by_gpid' => 'TS001',                  â”‚
â”‚          ]);                                                 â”‚
â”‚                                                               â”‚
â”‚      âœ… Alert resolved                                       â”‚
â”‚      ğŸ”” Navigation badge updated: [Stock Alerts (0)]        â”‚
â”‚  }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Barcode System Workflow

### 7.1 QR Code Generation & Deployment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 1: Generate Barcode Token                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Manager/Super Admin:                                        â”‚
â”‚  Navigate to: Filament â†’ Barcode Tokens â†’ Create            â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Form (Auto-filled):                                         â”‚
â”‚  â€¢ Token: e8f5c3a2-4b1d-4e9f-a3c7-6d8e9f1a2b3c (UUID)       â”‚
â”‚  â€¢ Equipment Type: all                                       â”‚
â”‚  â€¢ Active: âœ…                                                â”‚
â”‚                                                               â”‚
â”‚  [Save]                                                      â”‚
â”‚  â†“                                                            â”‚
â”‚  barcode_tokens table:                                       â”‚
â”‚    id: 1                                                      â”‚
â”‚    token: e8f5c3a2-4b1d-4e9f-a3c7-6d8e9f1a2b3c              â”‚
â”‚    equipment_type: all                                       â”‚
â”‚    is_active: true                                           â”‚
â”‚    usage_count: 0                                            â”‚
â”‚    created_at: 2025-11-18                                    â”‚
â”‚                                                               â”‚
â”‚  âœ… Token created                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                                                â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 2: Generate QR Code                                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Actions available in table:                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [View QR] - Preview QR code in modal                   â”‚ â”‚
â”‚  â”‚ [Download QR] - Download as PNG (400x400px)            â”‚ â”‚
â”‚  â”‚ [Copy URL] - Copy WO submission URL                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  Click [View QR]:                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ MODAL: QR Code Preview                                 â”‚ â”‚
â”‚  â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚     Work Order Submission QR Code                       â”‚ â”‚
â”‚  â”‚     Scan this QR code to submit a work order            â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚ â”‚
â”‚  â”‚         â”‚   â–ˆâ–€â–€â–€â–€â–€â–ˆ â–€â–„â–ˆ   â”‚                             â”‚ â”‚
â”‚  â”‚         â”‚   â–ˆ â–ˆâ–ˆâ–ˆ â–ˆ  â–„â–€   â”‚  300x300px QR Code          â”‚ â”‚
â”‚  â”‚         â”‚   â–ˆâ–„â–„â–„â–„â–„â–ˆ â–ˆ â–ˆ   â”‚                             â”‚ â”‚
â”‚  â”‚         â”‚    â–€â–€â–€â–€â–€  â–€ â–€   â”‚                             â”‚ â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚     Token:                                              â”‚ â”‚
â”‚  â”‚     e8f5c3a2-4b1d-4e9f-a3c7-6d8e9f1a2b3c               â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚     URL:                                                â”‚ â”‚
â”‚  â”‚     https://cmms.example.com/barcode/wo/                â”‚ â”‚
â”‚  â”‚     e8f5c3a2-4b1d-4e9f-a3c7-6d8e9f1a2b3c               â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚     Print this QR code and place it near equipment.     â”‚ â”‚
â”‚  â”‚     Operators can scan to quickly submit work orders.   â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚     [Close]                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  Click [Download QR]:                                        â”‚
â”‚  â†’ Downloads: barcode-e8f5c3a2...b3c.png (400x400px)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 3: Print & Deploy QR Code                             â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Recommended Deployment:                                     â”‚
â”‚                                                               â”‚
â”‚  1. Print QR code on durable material                        â”‚
â”‚     â€¢ Laminated paper (A5 or A4 size)                        â”‚
â”‚     â€¢ Acrylic board with mounting holes                      â”‚
â”‚     â€¢ Weatherproof sticker for outdoor equipment             â”‚
â”‚                                                               â”‚
â”‚  2. Add instructional text:                                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚     â”‚                                                      â”‚  â”‚
â”‚     â”‚         ğŸ”§ REPORT EQUIPMENT PROBLEM ğŸ”§             â”‚  â”‚
â”‚     â”‚                                                      â”‚  â”‚
â”‚     â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚  â”‚
â”‚     â”‚         â”‚   â–ˆâ–€â–€â–€â–€â–€â–ˆ â–€â–„â–ˆ   â”‚                         â”‚  â”‚
â”‚     â”‚         â”‚   â–ˆ â–ˆâ–ˆâ–ˆ â–ˆ  â–„â–€   â”‚                         â”‚  â”‚
â”‚     â”‚         â”‚   â–ˆâ–„â–„â–„â–„â–„â–ˆ â–ˆ â–ˆ   â”‚                         â”‚  â”‚
â”‚     â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚  â”‚
â”‚     â”‚                                                      â”‚  â”‚
â”‚     â”‚         SCAN QR CODE TO SUBMIT                      â”‚  â”‚
â”‚     â”‚         WORK ORDER                                  â”‚  â”‚
â”‚     â”‚                                                      â”‚  â”‚
â”‚     â”‚         Equipment: Fryer EP Line                    â”‚  â”‚
â”‚     â”‚         Location: Processing Area - EP              â”‚  â”‚
â”‚     â”‚                                                      â”‚  â”‚
â”‚     â”‚         FOR ASSISTANCE CALL:                        â”‚  â”‚
â”‚     â”‚         Mechanic: ext 101                           â”‚  â”‚
â”‚     â”‚         Electric: ext 102                           â”‚  â”‚
â”‚     â”‚         Utility: ext 103                            â”‚  â”‚
â”‚     â”‚                                                      â”‚  â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  3. Install at strategic locations:                          â”‚
â”‚     âœ… Near each critical equipment                          â”‚
â”‚     âœ… At operator stations                                  â”‚
â”‚     âœ… In control rooms                                      â”‚
â”‚     âœ… At equipment access points                            â”‚
â”‚                                                               â”‚
â”‚  4. Maintenance team training:                               â”‚
â”‚     â€¢ Show operators how to scan QR code                     â”‚
â”‚     â€¢ Demonstrate WO submission form                         â”‚
â”‚     â€¢ Practice with test submissions                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 Operator WO Submission Flow (Complete)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TIME: 14:30 - Equipment Breakdown Detected                  â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Operator Nana (Shift 1) notices:                            â”‚
â”‚  "Fryer tidak bisa start, ada bunyi aneh dari motor"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: Scan QR Code (No Login Required)                    â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  ğŸ“± Smartphone â†’ Open Camera â†’ Point at QR Code              â”‚
â”‚                                                               â”‚
â”‚  Phone detects URL:                                          â”‚
â”‚  https://cmms.example.com/barcode/wo/e8f5c3a2...             â”‚
â”‚                                                               â”‚
â”‚  [Tap to Open] â†’ Browser opens URL                           â”‚
â”‚                                                               â”‚
â”‚  â±ï¸ Time: 14:31 (1 minute elapsed)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: Backend Validates Token                             â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Route: /barcode/wo/{token}                                  â”‚
â”‚  Controller: BarcodeWoController@show                        â”‚
â”‚                                                               â”‚
â”‚  $token = $request->token;                                   â”‚
â”‚  $barcodeToken = BarcodeToken::validateToken($token);        â”‚
â”‚                                                               â”‚
â”‚  Validation Checks:                                          â”‚
â”‚  âœ… Token exists in database                                 â”‚
â”‚  âœ… is_active = true                                         â”‚
â”‚  âœ… Not soft deleted                                         â”‚
â”‚                                                               â”‚
â”‚  If invalid: return 404 error                                â”‚
â”‚  If valid: Show WO submission form                           â”‚
â”‚                                                               â”‚
â”‚  â±ï¸ Time: 14:31 (validation < 1 second)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: Fill Work Order Form (Public Access)                â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  ğŸ”“ No Login Required - Public Form                          â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”§ Submit Work Order                                    â”‚ â”‚
â”‚  â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Operator Information:                                   â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â”‚ GPID: [OP001________________]                     â”‚   â”‚ â”‚
â”‚  â”‚ â”‚                                                    â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ Full Name: [Nana Operator Shift 1____________]   â”‚   â”‚ â”‚
â”‚  â”‚ â”‚                                                    â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ Shift: (â€¢) 1  ( ) 2  ( ) 3                       â”‚   â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Problem Details:                                        â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â”‚ Problem Type: [Breakdown â–¼]                       â”‚   â”‚ â”‚
â”‚  â”‚ â”‚   Options:                                        â”‚   â”‚ â”‚
â”‚  â”‚ â”‚   â€¢ Breakdown (Equipment completely stopped)     â”‚   â”‚ â”‚
â”‚  â”‚ â”‚   â€¢ Abnormality (Equipment working but unusual)  â”‚   â”‚ â”‚
â”‚  â”‚ â”‚   â€¢ Request Consumable                           â”‚   â”‚ â”‚
â”‚  â”‚ â”‚   â€¢ Improvement                                  â”‚   â”‚ â”‚
â”‚  â”‚ â”‚   â€¢ Inspection                                   â”‚   â”‚ â”‚
â”‚  â”‚ â”‚                                                    â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ Assign To: [Mechanic â–¼]                          â”‚   â”‚ â”‚
â”‚  â”‚ â”‚   Options: Mechanic / Electric / Utility         â”‚   â”‚ â”‚
â”‚  â”‚ â”‚                                                    â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ Description: (Required)                          â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ â”‚ Fryer tidak bisa start.                      â”‚ â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ â”‚ Ada bunyi aneh dari motor, seperti bunyi     â”‚ â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ â”‚ bearing yang aus.                            â”‚ â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ â”‚ Sudah dicoba restart beberapa kali tapi      â”‚ â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ â”‚ tetap tidak mau jalan.                       â”‚ â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ â”‚                                              â”‚ â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ â”‚ (300 characters remaining)                   â”‚ â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Equipment Location: (Cascade Dropdowns)                 â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â”‚ Area: [Proses â–¼]                                  â”‚   â”‚ â”‚
â”‚  â”‚ â”‚   â†“ Auto-loads sub areas                          â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ Sub Area: [EP â–¼]                                  â”‚   â”‚ â”‚
â”‚  â”‚ â”‚   â†“ Auto-loads assets                             â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ Asset: [Processing â–¼]                             â”‚   â”‚ â”‚
â”‚  â”‚ â”‚   â†“ Auto-loads sub assets                         â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ Sub Asset: [Fryer â–¼]                              â”‚   â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Problem Photos: (Optional, max 5 photos)                â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â”‚ ğŸ“· [Upload Photo 1] fryer-motor.jpg âœ…           â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ ğŸ“· [Upload Photo 2] control-panel.jpg âœ…         â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ ğŸ“· [Upload Photo 3] (click to upload)            â”‚   â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ âš ï¸ Priority: CRITICAL (auto from Breakdown)             â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ [Submit Work Order]                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â±ï¸ Time: 14:35 (4 minutes to fill form)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: Backend Processes Submission                        â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Controller: BarcodeWoController@store                       â”‚
â”‚                                                               â”‚
â”‚  Validation:                                                 â”‚
â”‚  âœ… All required fields present                              â”‚
â”‚  âœ… GPID format valid                                        â”‚
â”‚  âœ… Equipment hierarchy valid                                â”‚
â”‚  âœ… Photos size < 5MB each                                   â”‚
â”‚                                                               â”‚
â”‚  Generate WO Number:                                         â”‚
â”‚  $woNumber = WorkOrder::generateWoNumber();                  â”‚
â”‚  â†’ "WO-202511-0001"                                          â”‚
â”‚                                                               â”‚
â”‚  Upload Photos:                                              â”‚
â”‚  Storage::disk('private')->putFile(                          â”‚
â”‚      'wo-photos',                                            â”‚
â”‚      $request->file('photos')                                â”‚
â”‚  );                                                          â”‚
â”‚  â†’ ["wo-photos/abc123.jpg", "wo-photos/def456.jpg"]         â”‚
â”‚                                                               â”‚
â”‚  Auto-set Priority:                                          â”‚
â”‚  priority = match($problem_type) {                           â”‚
â”‚      'breakdown' => 'critical', âœ…                           â”‚
â”‚      'abnormality' => 'high',                                â”‚
â”‚      'inspection' => 'medium',                               â”‚
â”‚      default => 'low',                                       â”‚
â”‚  };                                                          â”‚
â”‚                                                               â”‚
â”‚  Create Work Order:                                          â”‚
â”‚  $workOrder = WorkOrder::create([                            â”‚
â”‚      'wo_number' => 'WO-202511-0001',                        â”‚
â”‚      'created_by_gpid' => 'OP001',                           â”‚
â”‚      'operator_name' => 'Nana Operator Shift 1',             â”‚
â”‚      'shift' => '1',                                         â”‚
â”‚      'problem_type' => 'breakdown',                          â”‚
â”‚      'assign_to' => 'mechanic',                              â”‚
â”‚      'area_id' => 1,                                         â”‚
â”‚      'sub_area_id' => 1,                                     â”‚
â”‚      'asset_id' => 1,                                        â”‚
â”‚      'sub_asset_id' => 1,                                    â”‚
â”‚      'description' => 'Fryer tidak bisa start...',           â”‚
â”‚      'photos' => ['wo-photos/abc123.jpg', ...],              â”‚
â”‚      'status' => 'submitted',                                â”‚
â”‚      'priority' => 'critical',                               â”‚
â”‚      'created_at' => '2025-11-18 14:35:00',                  â”‚
â”‚  ]);                                                         â”‚
â”‚                                                               â”‚
â”‚  Update Barcode Token:                                       â”‚
â”‚  $barcodeToken->increment('usage_count');                    â”‚
â”‚  $barcodeToken->update(['last_used_at' => now()]);           â”‚
â”‚                                                               â”‚
â”‚  âœ… WO Created Successfully                                  â”‚
â”‚  â±ï¸ Time: 14:35 (< 1 second processing)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 5: Automatic Notifications                             â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  A. Email to Mechanic Department:                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ To: mechanic-team@company.com                          â”‚ â”‚
â”‚  â”‚ Subject: ğŸš¨ CRITICAL WO: WO-202511-0001               â”‚ â”‚
â”‚  â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ New Critical Work Order Submitted                       â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ WO Number: WO-202511-0001                               â”‚ â”‚
â”‚  â”‚ Priority: ğŸ”´ CRITICAL                                   â”‚ â”‚
â”‚  â”‚ Problem Type: Breakdown                                 â”‚ â”‚
â”‚  â”‚ Equipment: Fryer EP Line                                â”‚ â”‚
â”‚  â”‚ Location: Proses > EP > Processing > Fryer              â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Reported By: Nana Operator Shift 1 (OP001)             â”‚ â”‚
â”‚  â”‚ Time Reported: 2025-11-18 14:35                         â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Description:                                            â”‚ â”‚
â”‚  â”‚ Fryer tidak bisa start. Ada bunyi aneh dari motor...    â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Photos: 2 attached                                      â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ [View Full WO in CMMS System]                           â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Please respond immediately due to critical priority.    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  B. WhatsApp/SMS to Mechanic Team:                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸš¨ CRITICAL WO                                          â”‚ â”‚
â”‚  â”‚ WO-202511-0001                                          â”‚ â”‚
â”‚  â”‚ Fryer EP Line - Breakdown                               â”‚ â”‚
â”‚  â”‚ Reported by OP001 at 14:35                              â”‚ â”‚
â”‚  â”‚ Login to CMMS for details                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  C. In-App Notification (Filament):                          â”‚
â”‚  All active Mechanic technicians and ASM001 see:             â”‚
â”‚  ğŸ”” [1] New notification                                     â”‚
â”‚                                                               â”‚
â”‚  D. Dashboard Update:                                        â”‚
â”‚  Work Order appears in:                                      â”‚
â”‚  â€¢ ASM001 (Asisten Manager Mechanic) dashboard               â”‚
â”‚  â€¢ TCM001, TCM002, TCM003 (Mechanic Technicians) dashboard   â”‚
â”‚                                                               â”‚
â”‚  â±ï¸ Time: 14:35 (notifications sent < 1 second)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 6: Success Page Shown to Operator                      â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚              âœ… Work Order Berhasil Dibuat               â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚              WO Number: WO-202511-0001                  â”‚ â”‚
â”‚  â”‚              Status: Submitted                          â”‚ â”‚
â”‚  â”‚              Priority: Critical                         â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚              technician Mechanic akan segera               â”‚ â”‚
â”‚  â”‚              menindaklanjuti laporan Anda.              â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚              Terima kasih atas laporannya!              â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚              [Submit Another Work Order]                â”‚ â”‚
â”‚  â”‚              [View My Submitted WOs]                    â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  â±ï¸ Total Time: 5 minutes (from breakdown to submission)    â”‚
â”‚                                                               â”‚
â”‚  Operator can now:                                           â”‚
â”‚  â€¢ Return to work                                            â”‚
â”‚  â€¢ Submit another WO if needed                               â”‚
â”‚  â€¢ View status of submitted WOs (optional login)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 Barcode Security & Validation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SECURITY MEASURES                                            â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  1. Token Validation:                                        â”‚
â”‚     âœ… UUID format (impossible to guess)                     â”‚
â”‚     âœ… Unique constraint in database                         â”‚
â”‚     âœ… Active status check                                   â”‚
â”‚     âœ… Not soft deleted check                                â”‚
â”‚                                                               â”‚
â”‚  2. Rate Limiting:                                           â”‚
â”‚     â€¢ Max 10 submissions per IP per minute                   â”‚
â”‚     â€¢ Max 100 submissions per token per day                  â”‚
â”‚     â€¢ Prevents spam/abuse                                    â”‚
â”‚                                                               â”‚
â”‚  3. Form Validation:                                         â”‚
â”‚     â€¢ Server-side validation (Laravel Request)               â”‚
â”‚     â€¢ CSRF protection                                        â”‚
â”‚     â€¢ XSS sanitization                                       â”‚
â”‚     â€¢ File upload validation (type, size)                    â”‚
â”‚                                                               â”‚
â”‚  4. Data Privacy:                                            â”‚
â”‚     â€¢ Photos stored in private disk                          â”‚
â”‚     â€¢ No sensitive data in URL                               â”‚
â”‚     â€¢ Operator GPID required (accountability)                â”‚
â”‚                                                               â”‚
â”‚  5. Audit Trail:                                             â”‚
â”‚     â€¢ Every submission logged                                â”‚
â”‚     â€¢ IP address recorded                                    â”‚
â”‚     â€¢ Timestamp recorded                                     â”‚
â”‚     â€¢ Token usage tracked                                    â”‚
â”‚                                                               â”‚
â”‚  6. Token Management:                                        â”‚
â”‚     â€¢ Can be deactivated instantly                           â”‚
â”‚     â€¢ Can track usage statistics                             â”‚
â”‚     â€¢ Can regenerate if compromised                          â”‚
â”‚     â€¢ Soft delete (preserves history)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Stock Alert Workflow

### 8.1 Automatic Alert Generation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TRIGGER: Part Stock Falls Below Minimum                     â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Scenario: PM Execution uses MEC-BEAR-001                    â”‚
â”‚                                                               â”‚
â”‚  BEFORE:                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Part: MEC-BEAR-001 (Bearing 6205)                      â”‚ â”‚
â”‚  â”‚ Current Stock: 6 pcs                                    â”‚ â”‚
â”‚  â”‚ Min Stock: 5 pcs                                        â”‚ â”‚
â”‚  â”‚ Status: Sufficient âœ…                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  PM Execution uses 3 pcs:                                    â”‚
â”‚  current_stock = 6 - 3 = 3 pcs                               â”‚
â”‚                                                               â”‚
â”‚  AFTER:                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Current Stock: 3 pcs âš ï¸                                 â”‚ â”‚
â”‚  â”‚ Min Stock: 5 pcs                                        â”‚ â”‚
â”‚  â”‚ Status: Low Stock ğŸŸ                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CHECK CONDITION                                             â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  if ($part->current_stock <= $part->min_stock) {             â”‚
â”‚      3 <= 5 ? YES âœ…                                         â”‚
â”‚                                                               â”‚
â”‚      $alertType = $part->current_stock == 0                  â”‚
â”‚          ? 'out_of_stock'                                    â”‚
â”‚          : 'low_stock';                                      â”‚
â”‚                                                               â”‚
â”‚      â†’ $alertType = 'low_stock' (because 3 > 0)              â”‚
â”‚  }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CREATE STOCK ALERT                                          â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  StockAlert::create([                                        â”‚
â”‚      'part_id' => 1,                                         â”‚
â”‚      'alert_type' => 'low_stock',                            â”‚
â”‚      'triggered_at' => now(),                                â”‚
â”‚      'is_resolved' => false,                                 â”‚
â”‚  ]);                                                         â”‚
â”‚                                                               â”‚
â”‚  âœ… Alert created                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SEND NOTIFICATIONS                                          â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  A. Email to Tech Store Team:                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ To: techstore@company.com                               â”‚ â”‚
â”‚  â”‚ Subject: âš ï¸ Low Stock Alert: MEC-BEAR-001             â”‚ â”‚
â”‚  â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Low Stock Alert                                         â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Part Number: MEC-BEAR-001                               â”‚ â”‚
â”‚  â”‚ Part Name: Bearing 6205                                 â”‚ â”‚
â”‚  â”‚ Category: Mechanical                                    â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Current Stock: 3 pcs âš ï¸                                 â”‚ â”‚
â”‚  â”‚ Minimum Stock: 5 pcs                                    â”‚ â”‚
â”‚  â”‚ Recommended Restock: 50 pcs                             â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Last Used: PM-202511-001 (2025-11-18 10:00)            â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ [Restock Now] [View Inventory]                         â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Please restock as soon as possible to prevent           â”‚ â”‚
â”‚  â”‚ production delays.                                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  B. In-App Notification (Filament):                          â”‚
â”‚  Tech Store users see:                                       â”‚
â”‚  ğŸ”” [1] New notification                                     â”‚
â”‚  "Low stock alert for MEC-BEAR-001"                          â”‚
â”‚                                                               â”‚
â”‚  C. Navigation Badge Update:                                 â”‚
â”‚  Stock Alerts menu shows:                                    â”‚
â”‚  [Stock Alerts ğŸ”´ 1]                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TECH STORE DASHBOARD                                        â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ”” Unresolved Stock Alerts (1)                         â”‚ â”‚
â”‚  â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ MEC-BEAR-001 - Bearing 6205                             â”‚ â”‚
â”‚  â”‚ Alert: Low Stock ğŸŸ                                      â”‚ â”‚
â”‚  â”‚ Current: 3 pcs | Min: 5 pcs                             â”‚ â”‚
â”‚  â”‚ Triggered: 2 hours ago                                  â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ [Resolve] [Restock]                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 Alert Resolution Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OPTION 1: Resolve from Stock Alert Page                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tech Store clicks [Resolve]                                 â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Modal: Confirm Resolution                                   â”‚
â”‚  "Mark this stock alert as resolved?                         â”‚
â”‚   Make sure the stock has been replenished."                 â”‚
â”‚                                                               â”‚
â”‚  [Confirm] â—€â”€â”€ Click                                         â”‚
â”‚  â†“                                                            â”‚
â”‚  $alert->markAsResolved(auth()->user()->gpid);               â”‚
â”‚  â†“                                                            â”‚
â”‚  UPDATE stock_alerts SET                                     â”‚
â”‚      is_resolved = true,                                     â”‚
â”‚      resolved_at = '2025-11-18 16:00',                       â”‚
â”‚      resolved_by_gpid = 'TS001'                              â”‚
â”‚  WHERE id = 1;                                               â”‚
â”‚                                                               â”‚
â”‚  âœ… Alert marked as resolved manually                        â”‚
â”‚  ğŸ”” Badge updated: [Stock Alerts 0]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OPTION 2: Auto-Resolve on Restock                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tech Store clicks [Restock] (from alert or inventory)       â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Navigates to: Inventory â†’ MEC-BEAR-001 â†’ [Add Stock]       â”‚
â”‚                                                               â”‚
â”‚  Modal: Add Stock                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Quantity to Add: 50                                     â”‚ â”‚
â”‚  â”‚ Notes: "PO#2024-11-150, Supplier: PT Bearing"          â”‚ â”‚
â”‚  â”‚ [Add Stock]                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â†“                                                            â”‚
â”‚  Process:                                                    â”‚
â”‚  1. Update part stock: 3 â†’ 53                                â”‚
â”‚  2. Create inventory movement (IN)                           â”‚
â”‚  3. Check if current_stock >= min_stock:                     â”‚
â”‚     53 >= 5 ? YES âœ…                                         â”‚
â”‚  4. Auto-resolve all unresolved alerts for this part:        â”‚
â”‚                                                               â”‚
â”‚     StockAlert::where('part_id', 1)                          â”‚
â”‚         ->where('is_resolved', false)                        â”‚
â”‚         ->update([                                           â”‚
â”‚             'is_resolved' => true,                           â”‚
â”‚             'resolved_at' => now(),                          â”‚
â”‚             'resolved_by_gpid' => 'TS001',                   â”‚
â”‚         ]);                                                  â”‚
â”‚                                                               â”‚
â”‚  âœ… Stock replenished                                        â”‚
â”‚  âœ… Alert auto-resolved                                      â”‚
â”‚  ğŸ”” Badge updated: [Stock Alerts 0]                          â”‚
â”‚  ğŸ“§ Confirmation email sent to tech store                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Auto-Calculation Workflows

### 9.1 PM Cost Calculation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TRIGGER: PM Execution Completed                             â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  PM Execution Data:                                          â”‚
â”‚  â€¢ Duration: 120 minutes                                     â”‚
â”‚  â€¢ Parts Used:                                               â”‚
â”‚    - MEC-BELT-001: 2 pcs @ IDR 150,000 = IDR 300,000        â”‚
â”‚    - CON-OIL-001: 5 L @ IDR 45,000 = IDR 225,000            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: Calculate Labour Cost                               â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Labour Rate Configuration:                                  â”‚
â”‚  â€¢ Hourly Rate: IDR 50,000 / hour                            â”‚
â”‚  â€¢ Overtime Rate: IDR 75,000 / hour (after 8 hours)          â”‚
â”‚                                                               â”‚
â”‚  Calculation:                                                â”‚
â”‚  duration_hours = 120 / 60 = 2 hours                         â”‚
â”‚  labour_cost = 2 * 50,000 = IDR 100,000                      â”‚
â”‚                                                               â”‚
â”‚  If duration > 480 min (8 hours):                            â”‚
â”‚    regular_hours = 8                                         â”‚
â”‚    overtime_hours = (duration - 480) / 60                    â”‚
â”‚    labour_cost = (regular_hours * 50,000) +                  â”‚
â”‚                  (overtime_hours * 75,000)                   â”‚
â”‚                                                               â”‚
â”‚  Result: labour_cost = IDR 100,000 âœ…                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: Calculate Parts Cost                                â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Sum all parts used:                                         â”‚
â”‚  $partsUsage = $pmExecution->partsUsage;                     â”‚
â”‚                                                               â”‚
â”‚  foreach ($partsUsage as $usage) {                           â”‚
â”‚      $parts_cost += $usage->cost;                            â”‚
â”‚  }                                                           â”‚
â”‚                                                               â”‚
â”‚  Calculation:                                                â”‚
â”‚  parts_cost = 300,000 + 225,000 = IDR 525,000               â”‚
â”‚                                                               â”‚
â”‚  Result: parts_cost = IDR 525,000 âœ…                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: Calculate Overhead Cost                             â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Overhead Configuration:                                     â”‚
â”‚  â€¢ Percentage: 10% of (labour + parts)                       â”‚
â”‚  â€¢ Includes: utilities, tools depreciation, management       â”‚
â”‚                                                               â”‚
â”‚  Calculation:                                                â”‚
â”‚  overhead_cost = (labour_cost + parts_cost) * 0.10           â”‚
â”‚  overhead_cost = (100,000 + 525,000) * 0.10                  â”‚
â”‚  overhead_cost = 625,000 * 0.10                              â”‚
â”‚  overhead_cost = IDR 62,500                                  â”‚
â”‚                                                               â”‚
â”‚  Result: overhead_cost = IDR 62,500 âœ…                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: Calculate Total Cost                                â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  total_cost = labour_cost + parts_cost + overhead_cost       â”‚
â”‚  total_cost = 100,000 + 525,000 + 62,500                     â”‚
â”‚  total_cost = IDR 687,500 âœ…                                 â”‚
â”‚                                                               â”‚
â”‚  Save to Database:                                           â”‚
â”‚  PmCost::create([                                            â”‚
â”‚      'pm_execution_id' => 1,                                 â”‚
â”‚      'labour_cost' => 100000,                                â”‚
â”‚      'parts_cost' => 525000,                                 â”‚
â”‚      'overhead_cost' => 62500,                               â”‚
â”‚      'total_cost' => 687500,                                 â”‚
â”‚  ]);                                                         â”‚
â”‚                                                               â”‚
â”‚  âœ… PM Cost calculation complete                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 Work Order MTTR Calculation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MTTR (Mean Time To Repair) Calculation                      â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Timeline:                                                   â”‚
â”‚  â€¢ WO Created: 2025-11-18 14:30                              â”‚
â”‚  â€¢ Started: 2025-11-18 14:40 (10 min response time)          â”‚
â”‚  â€¢ Completed: 2025-11-18 16:00                               â”‚
â”‚                                                               â”‚
â”‚  Formula:                                                    â”‚
â”‚  MTTR = completed_at - created_at                            â”‚
â”‚  MTTR = 16:00 - 14:30                                        â”‚
â”‚  MTTR = 90 minutes âœ…                                        â”‚
â”‚                                                               â”‚
â”‚  Breakdown:                                                  â”‚
â”‚  â€¢ Response Time: 10 min (created â†’ started)                 â”‚
â”‚  â€¢ Actual Work Time: 50 min (total downtime)                 â”‚
â”‚  â€¢ Waiting Time: 30 min (hold period for parts)              â”‚
â”‚                                                               â”‚
â”‚  Update Work Order:                                          â”‚
â”‚  $workOrder->update([                                        â”‚
â”‚      'mttr' => 90, // in minutes                             â”‚
â”‚  ]);                                                         â”‚
â”‚                                                               â”‚
â”‚  Also saved in wo_costs table:                               â”‚
â”‚  WoCost::create([                                            â”‚
â”‚      'work_order_id' => 1,                                   â”‚
â”‚      'mttr' => 90,                                           â”‚
â”‚      ...                                                     â”‚
â”‚  ]);                                                         â”‚
â”‚                                                               â”‚
â”‚  Used for:                                                   â”‚
â”‚  â€¢ Performance KPI                                           â”‚
â”‚  â€¢ Department efficiency metrics                             â”‚
â”‚  â€¢ Monthly/Yearly reports                                    â”‚
â”‚  â€¢ Technician performance evaluation                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.3 Downtime Calculation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Downtime Calculation Algorithm                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Work Order Process Timeline:                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 14:30 â±ï¸ Created                                        â”‚ â”‚
â”‚  â”‚ 14:35 ğŸ‘ï¸ Reviewed                                       â”‚ â”‚
â”‚  â”‚ 14:36 âœ… Approved                                        â”‚ â”‚
â”‚  â”‚ 14:40 â–¶ï¸ Start (downtime_start)                         â”‚ â”‚
â”‚  â”‚ 15:00 â¸ï¸ Hold (downtime_end) â†’ 20 min                  â”‚ â”‚
â”‚  â”‚ 15:30 â–¶ï¸ Continue (downtime_start)                      â”‚ â”‚
â”‚  â”‚ 16:00 âœ… Complete (downtime_end) â†’ 30 min               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  Algorithm:                                                  â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  function calculateTotalDowntime($workOrder) {               â”‚
â”‚      $totalDowntime = 0;                                     â”‚
â”‚      $processes = $workOrder->processes()                    â”‚
â”‚          ->orderBy('timestamp')                              â”‚
â”‚          ->get();                                            â”‚
â”‚                                                               â”‚
â”‚      $startTime = null;                                      â”‚
â”‚                                                               â”‚
â”‚      foreach ($processes as $process) {                      â”‚
â”‚          switch ($process->action) {                         â”‚
â”‚              case 'start':                                   â”‚
â”‚              case 'continue':                                â”‚
â”‚                  $startTime = $process->timestamp;           â”‚
â”‚                  $process->update([                          â”‚
â”‚                      'downtime_start' => $startTime          â”‚
â”‚                  ]);                                         â”‚
â”‚                  break;                                      â”‚
â”‚                                                               â”‚
â”‚              case 'hold':                                    â”‚
â”‚              case 'complete':                                â”‚
â”‚                  if ($startTime) {                           â”‚
â”‚                      $endTime = $process->timestamp;         â”‚
â”‚                      $duration = $startTime->diffInMinutes(  â”‚
â”‚                          $endTime                            â”‚
â”‚                      );                                      â”‚
â”‚                                                               â”‚
â”‚                      $process->update([                      â”‚
â”‚                          'downtime_end' => $endTime,         â”‚
â”‚                          'downtime_duration' => $duration    â”‚
â”‚                      ]);                                     â”‚
â”‚                                                               â”‚
â”‚                      $totalDowntime += $duration;            â”‚
â”‚                      $startTime = null;                      â”‚
â”‚                  }                                           â”‚
â”‚                  break;                                      â”‚
â”‚          }                                                   â”‚
â”‚      }                                                       â”‚
â”‚                                                               â”‚
â”‚      return $totalDowntime;                                  â”‚
â”‚  }                                                           â”‚
â”‚                                                               â”‚
â”‚  Execution Result:                                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Iteration 1 (Start):                                        â”‚
â”‚    startTime = 14:40                                         â”‚
â”‚                                                               â”‚
â”‚  Iteration 2 (Hold):                                         â”‚
â”‚    endTime = 15:00                                           â”‚
â”‚    duration = 15:00 - 14:40 = 20 minutes                     â”‚
â”‚    totalDowntime = 0 + 20 = 20 minutes                       â”‚
â”‚    startTime = null                                          â”‚
â”‚                                                               â”‚
â”‚  Iteration 3 (Continue):                                     â”‚
â”‚    startTime = 15:30                                         â”‚
â”‚                                                               â”‚
â”‚  Iteration 4 (Complete):                                     â”‚
â”‚    endTime = 16:00                                           â”‚
â”‚    duration = 16:00 - 15:30 = 30 minutes                     â”‚
â”‚    totalDowntime = 20 + 30 = 50 minutes                      â”‚
â”‚                                                               â”‚
â”‚  Final Result:                                               â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  total_downtime = 50 minutes âœ…                              â”‚
â”‚                                                               â”‚
â”‚  Update work_orders table:                                   â”‚
â”‚  UPDATE work_orders                                          â”‚
â”‚  SET total_downtime = 50                                     â”‚
â”‚  WHERE id = 1;                                               â”‚
â”‚                                                               â”‚
â”‚  Impact:                                                     â”‚
â”‚  â€¢ Production reports                                        â”‚
â”‚  â€¢ OEE (Overall Equipment Effectiveness) calculation         â”‚
â”‚  â€¢ Equipment reliability metrics                             â”‚
â”‚  â€¢ Cost of downtime analysis                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. Compliance Tracking Workflow

### 10.1 PM Compliance Calculation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AUTOMATIC WEEKLY/MONTHLY COMPLIANCE CALCULATION              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Triggered by: Scheduled Job (Weekly & Monthly)              â”‚
â”‚  Command: php artisan compliance:calculate                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WEEKLY COMPLIANCE CALCULATION                               â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Period: Week 46, 2025 (Nov 11-17)                           â”‚
â”‚  period_start: 2025-11-11                                    â”‚
â”‚  period_end: 2025-11-17                                      â”‚
â”‚                                                               â”‚
â”‚  Step 1: Count Total PM Scheduled                            â”‚
â”‚  $totalPm = PmExecution::whereBetween('scheduled_date',      â”‚
â”‚      ['2025-11-11', '2025-11-17']                            â”‚
â”‚  )->count();                                                 â”‚
â”‚                                                               â”‚
â”‚  Result: 25 PM scheduled âœ…                                  â”‚
â”‚                                                               â”‚
â”‚  Step 2: Count Completed PM                                  â”‚
â”‚  $completedPm = PmExecution::whereBetween('scheduled_date',  â”‚
â”‚      ['2025-11-11', '2025-11-17']                            â”‚
â”‚  )->where('status', 'completed')->count();                   â”‚
â”‚                                                               â”‚
â”‚  Result: 23 PM completed âœ…                                  â”‚
â”‚                                                               â”‚
â”‚  Step 3: Count Overdue PM                                    â”‚
â”‚  $overduePm = PmExecution::whereBetween('scheduled_date',    â”‚
â”‚      ['2025-11-11', '2025-11-17']                            â”‚
â”‚  )->where('status', 'overdue')->count();                     â”‚
â”‚                                                               â”‚
â”‚  Result: 2 PM overdue âš ï¸                                     â”‚
â”‚                                                               â”‚
â”‚  Step 4: Calculate Compliance Percentage                     â”‚
â”‚  $compliancePercentage = ($completedPm / $totalPm) * 100;    â”‚
â”‚  $compliancePercentage = (23 / 25) * 100;                    â”‚
â”‚  $compliancePercentage = 92.00% âœ…                           â”‚
â”‚                                                               â”‚
â”‚  Step 5: Save to Database                                    â”‚
â”‚  PmCompliance::create([                                      â”‚
â”‚      'period' => 'week',                                     â”‚
â”‚      'period_start' => '2025-11-11',                         â”‚
â”‚      'period_end' => '2025-11-17',                           â”‚
â”‚      'total_pm' => 25,                                       â”‚
â”‚      'completed_pm' => 23,                                   â”‚
â”‚      'overdue_pm' => 2,                                      â”‚
â”‚      'compliance_percentage' => 92.00,                       â”‚
â”‚  ]);                                                         â”‚
â”‚                                                               â”‚
â”‚  âœ… Weekly compliance saved                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MONTHLY COMPLIANCE CALCULATION                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Period: November 2025                                       â”‚
â”‚  period_start: 2025-11-01                                    â”‚
â”‚  period_end: 2025-11-30                                      â”‚
â”‚                                                               â”‚
â”‚  Same calculation as weekly:                                 â”‚
â”‚  â€¢ total_pm: 108                                             â”‚
â”‚  â€¢ completed_pm: 102                                         â”‚
â”‚  â€¢ overdue_pm: 6                                             â”‚
â”‚  â€¢ compliance_percentage: 94.44% âœ…                          â”‚
â”‚                                                               â”‚
â”‚  PmCompliance::create([                                      â”‚
â”‚      'period' => 'month',                                    â”‚
â”‚      'period_start' => '2025-11-01',                         â”‚
â”‚      'period_end' => '2025-11-30',                           â”‚
â”‚      'total_pm' => 108,                                      â”‚
â”‚      'completed_pm' => 102,                                  â”‚
â”‚      'overdue_pm' => 6,                                      â”‚
â”‚      'compliance_percentage' => 94.44,                       â”‚
â”‚  ]);                                                         â”‚
â”‚                                                               â”‚
â”‚  âœ… Monthly compliance saved                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPLIANCE REPORTING                                        â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Dashboard Widget:                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ PM Compliance - November 2025                           â”‚ â”‚
â”‚  â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚         94.44% âœ… Excellent                              â”‚ â”‚
â”‚  â”‚         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘                          â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚  Total PM: 108                                          â”‚ â”‚
â”‚  â”‚  Completed: 102 âœ…                                      â”‚ â”‚
â”‚  â”‚  Overdue: 6 âš ï¸                                          â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚  Target: â‰¥ 95% (Good: â‰¥ 85%, Fair: â‰¥ 70%)              â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚  Trend: â†—ï¸ +2.44% from last month                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  Compliance Badges by Percentage:                            â”‚
â”‚  â€¢ â‰¥ 95%: ğŸŸ¢ Excellent (Green)                              â”‚
â”‚  â€¢ 85-94%: ğŸŸ¡ Good (Yellow)                                 â”‚
â”‚  â€¢ 70-84%: ğŸŸ  Fair (Orange)                                 â”‚
â”‚  â€¢ < 70%: ğŸ”´ Poor (Red)                                     â”‚
â”‚                                                               â”‚
â”‚  Manager Email Report (Monthly):                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ To: manager@company.com                                 â”‚ â”‚
â”‚  â”‚ Subject: PM Compliance Report - November 2025           â”‚ â”‚
â”‚  â”‚
â”‚  â”‚ Subject: PM Compliance Report - November 2025           â”‚ â”‚
â”‚  â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Monthly PM Compliance Report                            â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Period: November 2025                                   â”‚ â”‚
â”‚  â”‚ Overall Compliance: 94.44% âœ… Excellent                 â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Summary:                                                â”‚ â”‚
â”‚  â”‚ â€¢ Total PM Scheduled: 108                               â”‚ â”‚
â”‚  â”‚ â€¢ Completed On Time: 102                                â”‚ â”‚
â”‚  â”‚ â€¢ Overdue: 6                                            â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Department Breakdown:                                   â”‚ â”‚
â”‚  â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚ â”‚
â”‚  â”‚ Mechanic: 95.5% (42/44) âœ…                              â”‚ â”‚
â”‚  â”‚ Electric: 93.3% (28/30) ğŸŸ¡                              â”‚ â”‚
â”‚  â”‚ Utility: 94.1% (32/34) ğŸŸ¡                               â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Overdue PM Details:                                     â”‚ â”‚
â”‚  â”‚ 1. PM-202511-015 - Compressor (2 days late)            â”‚ â”‚
â”‚  â”‚ 2. PM-202511-032 - Panel Control (1 day late)          â”‚ â”‚
â”‚  â”‚ 3. PM-202511-048 - Chiller (3 days late)               â”‚ â”‚
â”‚  â”‚ ... (3 more)                                            â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Recommendations:                                        â”‚ â”‚
â”‚  â”‚ â€¢ Follow up on overdue PM                               â”‚ â”‚
â”‚  â”‚ â€¢ Review Electric department schedule                   â”‚ â”‚
â”‚  â”‚ â€¢ Maintain current performance                          â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ [View Full Report] [Download PDF]                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.2 On-Time Performance Tracking

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REAL-TIME PM EXECUTION COMPLIANCE CHECK                      â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  When PM Execution is completed:                             â”‚
â”‚  mutateFormDataBeforeSave() triggers compliance check        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPLIANCE LOGIC                                            â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Example Data:                                               â”‚
â”‚  â€¢ scheduled_date: 2025-11-18 (Monday)                       â”‚
â”‚  â€¢ actual_end: 2025-11-18 10:00                              â”‚
â”‚                                                               â”‚
â”‚  Tolerance: 1 day (24 hours)                                 â”‚
â”‚  deadline = scheduled_date + 1 day                           â”‚
â”‚  deadline = 2025-11-19 00:00                                 â”‚
â”‚                                                               â”‚
â”‚  Check:                                                      â”‚
â”‚  if ($data['actual_end'] <= $deadline) {                     â”‚
â”‚      2025-11-18 10:00 <= 2025-11-19 00:00                    â”‚
â”‚      TRUE âœ…                                                 â”‚
â”‚                                                               â”‚
â”‚      $data['is_on_time'] = true;                             â”‚
â”‚      $data['compliance_status'] = 'on_time';                 â”‚
â”‚  } else {                                                    â”‚
â”‚      $data['is_on_time'] = false;                            â”‚
â”‚      $data['compliance_status'] = 'late';                    â”‚
â”‚  }                                                           â”‚
â”‚                                                               â”‚
â”‚  Visual Indicators:                                          â”‚
â”‚  â€¢ On Time: ğŸŸ¢ Green badge "On Time"                        â”‚
â”‚  â€¢ Late: ğŸ”´ Red badge "Late"                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LATE COMPLETION EXAMPLE                                     â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  â€¢ scheduled_date: 2025-11-18 (Monday)                       â”‚
â”‚  â€¢ actual_end: 2025-11-20 15:00 (Wednesday)                  â”‚
â”‚                                                               â”‚
â”‚  deadline = 2025-11-19 00:00                                 â”‚
â”‚                                                               â”‚
â”‚  Check:                                                      â”‚
â”‚  2025-11-20 15:00 <= 2025-11-19 00:00                        â”‚
â”‚  FALSE âŒ                                                    â”‚
â”‚                                                               â”‚
â”‚  Result:                                                     â”‚
â”‚  â€¢ is_on_time = false                                        â”‚
â”‚  â€¢ compliance_status = 'late'                                â”‚
â”‚  â€¢ Badge: ğŸ”´ Late (2 days 15 hours)                         â”‚
â”‚                                                               â”‚
â”‚  Impact:                                                     â”‚
â”‚  â€¢ Counts towards overdue_pm in compliance calculation       â”‚
â”‚  â€¢ Lowers department compliance percentage                   â”‚
â”‚  â€¢ Triggers notification to asisten manager                  â”‚
â”‚  â€¢ Included in compliance reports                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 11. Data Flow Diagrams

### 11.1 Complete PM Lifecycle Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PM LIFECYCLE FLOWCHART                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

START
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Asisten Manager Creates PM      â”‚
â”‚ - Equipment selection           â”‚
â”‚ - Schedule configuration        â”‚
â”‚ - Assign to technician (GPID)   â”‚
â”‚ - Create checklist items        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PM Schedule Saved               â”‚
â”‚ â€¢ status = 'active'             â”‚
â”‚ â€¢ assigned_to_gpid = TCM001     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Notification Sent               â”‚
â”‚ â€¢ Email to technician           â”‚
â”‚ â€¢ In-app notification           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TCM001 Logs In                  â”‚
â”‚ â€¢ Views ONLY own PM (filter)    â”‚ â­ PERSONALIZED
â”‚ â€¢ Sees PM-202511-001            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Scheduled Date Arrives          â”‚
â”‚ â€¢ Monday, 2025-11-18            â”‚
â”‚ â€¢ PM shows in dashboard         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TCM001 Executes PM              â”‚
â”‚ â€¢ Start Time: 08:00             â”‚
â”‚ â€¢ Fill checklist items          â”‚
â”‚ â€¢ Take photos                   â”‚
â”‚ â€¢ Record parts used             â”‚
â”‚ â€¢ End Time: 10:00               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Submit] â†’ AUTO-PROCESSING      â”‚
â”‚ 1. Calculate duration (120 min) â”‚
â”‚ 2. Check compliance (on_time)   â”‚
â”‚ 3. Calculate costs (687,500)    â”‚
â”‚ 4. Deduct parts from inventory  â”‚
â”‚ 5. Create inventory movements   â”‚
â”‚ 6. Check stock alerts           â”‚
â”‚ 7. Update compliance stats      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PM Execution Saved              â”‚
â”‚ â€¢ status = 'completed'          â”‚
â”‚ â€¢ compliance_status = 'on_time' â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ If Parts Below Min Stock?       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ NO         â”‚ YES
         â”‚            â”‚
         â”‚            â–¼
         â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚       â”‚ Create Stock Alert   â”‚
         â”‚       â”‚ â€¢ Notify Tech Store  â”‚
         â”‚       â”‚ â€¢ Badge update       â”‚
         â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                  â”‚
         â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Weekly/Monthly Job Runs         â”‚
â”‚ â€¢ Calculate compliance %        â”‚
â”‚ â€¢ Generate reports              â”‚
â”‚ â€¢ Send to manager               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
           END
```

### 11.2 Complete WO Lifecycle Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   WORK ORDER LIFECYCLE                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

START (Equipment Breakdown)
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Operator Scans QR Code          â”‚
â”‚ â€¢ No login required             â”‚
â”‚ â€¢ Token validation              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fill WO Form (Public)           â”‚
â”‚ â€¢ Operator info (GPID)          â”‚
â”‚ â€¢ Problem details               â”‚
â”‚ â€¢ Equipment cascade selection   â”‚
â”‚ â€¢ Upload photos                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Submit] â†’ System Process       â”‚
â”‚ â€¢ Generate WO-202511-0001       â”‚
â”‚ â€¢ Auto-set priority (critical)  â”‚
â”‚ â€¢ Upload photos to storage      â”‚
â”‚ â€¢ Increment token usage         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WO Created                      â”‚
â”‚ â€¢ status = 'submitted'          â”‚
â”‚ â€¢ assign_to = 'mechanic'        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Notifications Sent              â”‚
â”‚ â€¢ Email to mechanic team        â”‚
â”‚ â€¢ WhatsApp/SMS                  â”‚
â”‚ â€¢ In-app notification           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Technician Views WO             â”‚
â”‚ â€¢ Filter: assign_to = mechanic  â”‚
â”‚ â€¢ Sees WO-202511-0001           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Review] Action                 â”‚
â”‚ â€¢ status â†’ 'reviewed'           â”‚
â”‚ â€¢ wo_processes record created   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Approve] Action                â”‚
â”‚ â€¢ status â†’ 'approved'           â”‚
â”‚ â€¢ wo_processes record created   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Start] Action                  â”‚
â”‚ â€¢ status â†’ 'in_progress'        â”‚
â”‚ â€¢ started_at = now()            â”‚
â”‚ â€¢ downtime_start = now() â±ï¸     â”‚
â”‚ â€¢ wo_processes record created   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Need Parts? â†’ [Hold]            â”‚
â”‚ â€¢ status â†’ 'on_hold'            â”‚
â”‚ â€¢ downtime_end = now()          â”‚
â”‚ â€¢ Calculate segment 1 duration  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parts Arrived â†’ [Continue]      â”‚
â”‚ â€¢ status â†’ 'in_progress'        â”‚
â”‚ â€¢ downtime_start = now() â±ï¸     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Work Done â†’ [Complete]          â”‚
â”‚ â€¢ Fill completion form          â”‚
â”‚ â€¢ List parts used               â”‚
â”‚ â€¢ Add solution notes            â”‚
â”‚ â€¢ Upload result photos          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Submit Complete] â†’ AUTO-PROCESSâ”‚
â”‚ 1. status â†’ 'completed'         â”‚
â”‚ 2. completed_at = now()         â”‚
â”‚ 3. downtime_end = now()         â”‚
â”‚ 4. Calculate total downtime     â”‚
â”‚ 5. Calculate MTTR               â”‚
â”‚ 6. Deduct parts from inventory  â”‚
â”‚ 7. Create inventory movements   â”‚
â”‚ 8. Calculate WO costs           â”‚
â”‚ 9. Check stock alerts           â”‚
â”‚ 10. wo_processes record created â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Manager Reviews â†’ [Close]       â”‚
â”‚ â€¢ status â†’ 'closed'             â”‚
â”‚ â€¢ closed_at = now()             â”‚
â”‚ â€¢ wo_processes final record     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WO Metrics Calculated           â”‚
â”‚ â€¢ Total Downtime: 50 min        â”‚
â”‚ â€¢ MTTR: 90 min                  â”‚
â”‚ â€¢ Total Cost: 300,000           â”‚
â”‚ â€¢ Used in reports & KPIs        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
           END
```

### 11.3 Inventory Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               INVENTORY MANAGEMENT FLOW                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SCENARIO: Part Usage from PM Execution

START
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PM Execution Completed          â”‚
â”‚ â€¢ Parts Used:                   â”‚
â”‚   - MEC-BELT-001: 2 pcs         â”‚
â”‚   - CON-OIL-001: 5 liter        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ InventoryService::deductParts()                             â”‚
â”‚                                                              â”‚
â”‚ For each part:                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ MEC-BELT-001:                                         â”‚   â”‚
â”‚ â”‚ 1. Get current stock: 25 pcs                         â”‚   â”‚
â”‚ â”‚ 2. Calculate new stock: 25 - 2 = 23 pcs             â”‚   â”‚
â”‚ â”‚ 3. Update part.current_stock = 23                    â”‚   â”‚
â”‚ â”‚ 4. Create InventoryMovement:                         â”‚   â”‚
â”‚ â”‚    - movement_type: 'out'                            â”‚   â”‚
â”‚ â”‚    - quantity: 2                                     â”‚   â”‚
â”‚ â”‚    - quantity_before: 25                             â”‚   â”‚
â”‚ â”‚    - quantity_after: 23                              â”‚   â”‚
â”‚ â”‚    - reference_type: 'pm_execution'                  â”‚   â”‚
â”‚ â”‚    - reference_id: 1                                 â”‚   â”‚
â”‚ â”‚    - performed_by_gpid: TCM001                       â”‚   â”‚
â”‚ â”‚ 5. Check: 23 <= 5 (min_stock)?                       â”‚   â”‚
â”‚ â”‚    NO â†’ No alert needed                              â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ CON-OIL-001:                                          â”‚   â”‚
â”‚ â”‚ 1. Get current stock: 500 L                          â”‚   â”‚
â”‚ â”‚ 2. Calculate new stock: 500 - 5 = 495 L             â”‚   â”‚
â”‚ â”‚ 3. Update part.current_stock = 495                   â”‚   â”‚
â”‚ â”‚ 4. Create InventoryMovement (similar)                â”‚   â”‚
â”‚ â”‚ 5. Check: 495 <= 100 (min_stock)?                    â”‚   â”‚
â”‚ â”‚    NO â†’ No alert needed                              â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ All Parts Deducted Successfully â”‚
â”‚ â€¢ Inventory updated             â”‚
â”‚ â€¢ Movements tracked             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
           END

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SCENARIO: Stock Falls Below Minimum

START
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WO Execution Uses Parts         â”‚
â”‚ â€¢ MEC-BEAR-001: 45 pcs used     â”‚
â”‚ â€¢ Current stock: 50 pcs         â”‚
â”‚ â€¢ Min stock: 10 pcs             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Deduct Parts                    â”‚
â”‚ â€¢ New stock: 50 - 45 = 5 pcs    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Stock Level               â”‚
â”‚ â€¢ 5 <= 10 (min_stock)? YES âš ï¸   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Determine Alert Type            â”‚
â”‚ â€¢ current_stock = 0?            â”‚
â”‚   NO (5 > 0)                    â”‚
â”‚ â€¢ alert_type = 'low_stock'      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create Stock Alert              â”‚
â”‚ â€¢ part_id = 1                   â”‚
â”‚ â€¢ alert_type = 'low_stock'      â”‚
â”‚ â€¢ triggered_at = now()          â”‚
â”‚ â€¢ is_resolved = false           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Send Notifications              â”‚
â”‚ â€¢ Email to Tech Store           â”‚
â”‚ â€¢ In-app notification           â”‚
â”‚ â€¢ Badge: [Stock Alerts ğŸ”´ 1]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tech Store Views Alert          â”‚
â”‚ â€¢ Navigate to Stock Alerts      â”‚
â”‚ â€¢ Sees MEC-BEAR-001 low stock   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tech Store Takes Action         â”‚
â”‚ Option 1: [Restock] or          â”‚
â”‚ Option 2: [Resolve] manually    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚            â”‚
    [Restock]    [Resolve]
         â”‚            â”‚
         â–¼            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Add Stock Form  â”‚ â”‚ Manual Resolve  â”‚
â”‚ â€¢ Qty: 50 pcs   â”‚ â”‚ â€¢ Mark resolved â”‚
â”‚ â€¢ Notes: PO#... â”‚ â”‚ â€¢ No stock add  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                   â”‚
         â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Update Stock                    â”‚
â”‚ â€¢ 5 + 50 = 55 pcs               â”‚
â”‚ â€¢ last_restocked_at = now()     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create Inventory Movement       â”‚
â”‚ â€¢ movement_type = 'in'          â”‚
â”‚ â€¢ quantity = 50                 â”‚
â”‚ â€¢ quantity_before = 5           â”‚
â”‚ â€¢ quantity_after = 55           â”‚
â”‚ â€¢ reference_type = 'manual'     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Stock Level               â”‚
â”‚ â€¢ 55 >= 10 (min_stock)? YES âœ…  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Auto-Resolve Alert              â”‚
â”‚ â€¢ is_resolved = true            â”‚
â”‚ â€¢ resolved_at = now()           â”‚
â”‚ â€¢ resolved_by_gpid = TS001      â”‚
â”‚ â€¢ Badge: [Stock Alerts 0]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Confirmation Email Sent         â”‚
â”‚ â€¢ Stock replenished: 55 pcs     â”‚
â”‚ â€¢ Alert resolved                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
           END
```

---

## 12. System Integration Points

### 12.1 External System Integration (Future)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  POTENTIAL EXTERNAL INTEGRATIONS                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  1. ERP System Integration                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ CMMS â†’ ERP                                              â”‚ â”‚
â”‚  â”‚ â€¢ Parts usage data                                      â”‚ â”‚
â”‚  â”‚ â€¢ Work order costs                                      â”‚ â”‚
â”‚  â”‚ â€¢ PM costs                                              â”‚ â”‚
â”‚  â”‚ â€¢ Inventory movements                                   â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ ERP â†’ CMMS                                              â”‚ â”‚
â”‚  â”‚ â€¢ Purchase orders                                       â”‚ â”‚
â”‚  â”‚ â€¢ Part prices updates                                   â”‚ â”‚
â”‚  â”‚ â€¢ Stock receipts                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  2. SCADA/PLC Integration                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ Real-time equipment status                            â”‚ â”‚
â”‚  â”‚ â€¢ Running hours from PLC                                â”‚ â”‚
â”‚  â”‚ â€¢ Cycle counts automatic                                â”‚ â”‚
â”‚  â”‚ â€¢ Auto WO creation on equipment alarm                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  3. WhatsApp Business API                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ Critical WO notifications                             â”‚ â”‚
â”‚  â”‚ â€¢ Stock alert messages                                  â”‚ â”‚
â”‚  â”‚ â€¢ PM reminder to technicians                            â”‚ â”‚
â”‚  â”‚ â€¢ Two-way communication                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  4. Email Server                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ SMTP for outgoing emails                              â”‚ â”‚
â”‚  â”‚ â€¢ Weekly/Monthly reports                                â”‚ â”‚
â”‚  â”‚ â€¢ Compliance reports                                    â”‚ â”‚
â”‚  â”‚ â€¢ Stock alert emails                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  5. Mobile App (Future)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ Native iOS/Android app                                â”‚ â”‚
â”‚  â”‚ â€¢ Offline PM execution                                  â”‚ â”‚
â”‚  â”‚ â€¢ Push notifications                                    â”‚ â”‚
â”‚  â”‚ â€¢ QR code scanner built-in                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.2 API Endpoints Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RESTful API ENDPOINTS (Future Implementation)                â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  Authentication:                                             â”‚
â”‚  POST   /api/auth/login                                      â”‚
â”‚  POST   /api/auth/logout                                     â”‚
â”‚  POST   /api/auth/refresh                                    â”‚
â”‚                                                               â”‚
â”‚  PM Schedules:                                               â”‚
â”‚  GET    /api/pm-schedules (with ?assigned_to_gpid filter)    â”‚
â”‚  GET    /api/pm-schedules/{id}                               â”‚
â”‚  POST   /api/pm-schedules                                    â”‚
â”‚  PUT    /api/pm-schedules/{id}                               â”‚
â”‚  DELETE /api/pm-schedules/{id}                               â”‚
â”‚                                                               â”‚
â”‚  PM Executions:                                              â”‚
â”‚  GET    /api/pm-executions (with ?executed_by_gpid filter)   â”‚
â”‚  GET    /api/pm-executions/{id}                              â”‚
â”‚  POST   /api/pm-executions                                   â”‚
â”‚  PUT    /api/pm-executions/{id}                              â”‚
â”‚                                                               â”‚
â”‚  Work Orders:                                                â”‚
â”‚  GET    /api/work-orders (with ?assign_to filter)            â”‚
â”‚  GET    /api/work-orders/{id}                                â”‚
â”‚  POST   /api/work-orders                                     â”‚
â”‚  PUT    /api/work-orders/{id}                                â”‚
â”‚  POST   /api/work-orders/{id}/review                         â”‚
â”‚  POST   /api/work-orders/{id}/approve                        â”‚
â”‚  POST   /api/work-orders/{id}/start                          â”‚
â”‚  POST   /api/work-orders/{id}/complete                       â”‚
â”‚                                                               â”‚
â”‚  Inventory:                                                  â”‚
â”‚  GET    /api/inventory                                       â”‚
â”‚  GET    /api/inventory/{id}                                  â”‚
â”‚  POST   /api/inventory/{id}/add-stock                        â”‚
â”‚  GET    /api/inventory/movements                             â”‚
â”‚  GET    /api/inventory/alerts                                â”‚
â”‚                                                               â”‚
â”‚  Equipment:                                                  â”‚
â”‚  GET    /api/equipment/hierarchy                             â”‚
â”‚  GET    /api/areas                                           â”‚
â”‚  GET    /api/areas/{id}/sub-areas                            â”‚
â”‚  GET    /api/sub-areas/{id}/assets                           â”‚
â”‚  GET    /api/assets/{id}/sub-assets                          â”‚
â”‚                                                               â”‚
â”‚  Reports:                                                    â”‚
â”‚  GET    /api/reports/pm-compliance?period=week|month         â”‚
â”‚  GET    /api/reports/work-orders?from=...&to=...             â”‚
â”‚  GET    /api/reports/inventory?category=...                  â”‚
â”‚  GET    /api/reports/downtime?from=...&to=...                â”‚
â”‚                                                               â”‚
â”‚  Barcode:                                                    â”‚
â”‚  POST   /api/barcode/wo/submit (public endpoint)             â”‚
â”‚  GET    /api/barcode/tokens/{token}/validate                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 13. Performance Optimization Guidelines

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE OPTIMIZATION                                        â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  1. Critical Indexes (Already implemented in migrations):    â”‚
â”‚     âœ… pm_schedules.assigned_to_gpid (personalized query)    â”‚
â”‚     âœ… work_orders.assign_to (department filter)             â”‚
â”‚     âœ… inventory_movements.created_at (date range queries)   â”‚
â”‚     âœ… parts.current_stock (stock status checks)             â”‚
â”‚                                                               â”‚
â”‚  2. Query Optimization:                                      â”‚
â”‚     â€¢ Use eager loading (with()) to avoid N+1 queries        â”‚
â”‚     â€¢ Implement query caching for static data                â”‚
â”‚     â€¢ Use database pagination (not collection paginate)      â”‚
â”‚                                                               â”‚
â”‚  3. Example Optimized Query:                                 â”‚
â”‚     // BAD (N+1 problem)                                     â”‚
â”‚     $pmSchedules = PmSchedule::all();                        â”‚
â”‚     foreach ($pmSchedules as $pm) {                          â”‚
â”‚         echo $pm->assignedTo->name; // Query per iteration   â”‚
â”‚     }                                                        â”‚
â”‚                                                               â”‚
â”‚     // GOOD (Eager loading)                                  â”‚
â”‚     $pmSchedules = PmSchedule::with([                        â”‚
â”‚         'assignedTo',                                        â”‚
â”‚         'assignedBy',                                        â”‚
â”‚         'subAsset.asset.subArea.area'                        â”‚
â”‚     ])->get();                                               â”‚
â”‚                                                               â”‚
â”‚  4. Caching Strategy:                                        â”‚
â”‚     â€¢ Cache equipment hierarchy (1 hour)                     â”‚
â”‚     â€¢ Cache user list (30 minutes)                           â”‚
â”‚     â€¢ Cache compliance data (1 day)                          â”‚
â”‚     â€¢ Clear cache on relevant updates                        â”‚
â”‚                                                               â”‚
â”‚  5. Database Partitioning (Future):                          â”‚
â”‚     â€¢ Partition inventory_movements by month                 â”‚
â”‚     â€¢ Partition pm_executions by year                        â”‚
â”‚     â€¢ Archive old work_orders to separate table              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FILE STORAGE OPTIMIZATION                                    â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  1. Photo Storage:                                           â”‚
â”‚     â€¢ Store in private disk (not public)                     â”‚
â”‚     â€¢ Implement image compression (max 2MB)                  â”‚
â”‚     â€¢ Generate thumbnails for list views                     â”‚
â”‚     â€¢ Use lazy loading for images                            â”‚
â”‚                                                               â”‚
â”‚  2. Storage Structure:                                       â”‚
â”‚     storage/                                                 â”‚
â”‚     â”œâ”€â”€ app/                                                 â”‚
â”‚     â”‚   â””â”€â”€ private/                                         â”‚
â”‚     â”‚       â”œâ”€â”€ pm-checklist-photos/                         â”‚
â”‚     â”‚       â”‚   â””â”€â”€ 2025/11/                                 â”‚
â”‚     â”‚       â”œâ”€â”€ pm-execution-photos/                         â”‚
â”‚     â”‚       â”‚   â””â”€â”€ 2025/11/                                 â”‚
â”‚     â”‚       â””â”€â”€ wo-photos/                                   â”‚
â”‚     â”‚           â””â”€â”€ 2025/11/                                 â”‚
â”‚                                                               â”‚
â”‚  3. Cleanup Jobs:                                            â”‚
â”‚     â€¢ Delete orphaned photos (monthly)                       â”‚
â”‚     â€¢ Archive old photos to S3/cold storage (yearly)         â”‚
â”‚     â€¢ Compress images older than 6 months                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 14. Security Best Practices

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SECURITY CHECKLIST                                           â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  âœ… 1. Authentication & Authorization                         â”‚
â”‚     â€¢ Laravel Breeze/Sanctum for auth                        â”‚
â”‚     â€¢ Role-based access control (canAccess, canEdit, etc.)   â”‚
â”‚     â€¢ GPID-based authorization for PM schedules              â”‚
â”‚     â€¢ Department-based access for WO                         â”‚
â”‚                                                               â”‚
â”‚  âœ… 2. Input Validation                                       â”‚
â”‚     â€¢ FormRequest classes for all inputs                     â”‚
â”‚     â€¢ Server-side validation (never trust client)            â”‚
â”‚     â€¢ File upload validation (type, size, extension)         â”‚
â”‚     â€¢ SQL injection protection (Eloquent ORM)                â”‚
â”‚                                                               â”‚
â”‚  âœ… 3. XSS Protection                                         â”‚
â”‚     â€¢ Blade template escaping {{ }} default                  â”‚
â”‚     â€¢ Filament auto-escapes outputs                          â”‚
â”‚     â€¢ Sanitize rich text inputs                              â”‚
â”‚                                                               â”‚
â”‚  âœ… 4. CSRF Protection                                        â”‚
â”‚     â€¢ Laravel CSRF tokens on all forms                       â”‚
â”‚     â€¢ SameSite cookie attribute                              â”‚
â”‚                                                               â”‚
â”‚  âœ… 5. Data Privacy                                           â”‚
â”‚     â€¢ Photos stored in private disk                          â”‚
â”‚     â€¢ Signed URLs for file access                            â”‚
â”‚     â€¢ No sensitive data in URLs                              â”‚
â”‚     â€¢ Encrypted database fields (if needed)                  â”‚
â”‚                                                               â”‚
â”‚  âœ… 6. Rate Limiting                                          â”‚
â”‚     â€¢ API rate limiting (60 requests/minute)                 â”‚
â”‚     â€¢ Barcode WO submission (10/minute per IP)               â”‚
â”‚     â€¢ Login attempts limiting                                â”‚
â”‚                                                               â”‚
â”‚  âœ… 7. Audit Trail                                            â”‚
â”‚     â€¢ created_by tracking (GPID)                             â”‚
â”‚     â€¢ updated_at automatic timestamps                        â”‚
â”‚     â€¢ Soft deletes (preserve history)                        â”‚
â”‚     â€¢ Activity log package (optional)                        â”‚
â”‚                                                               â”‚
â”‚  âœ… 8. Environment Security                                   â”‚
â”‚     â€¢ .env file not in git                                   â”‚
â”‚     â€¢ Strong APP_KEY                                         â”‚
â”‚     â€¢ HTTPS in production                                    â”‚
â”‚     â€¢ Database credentials secured                           â”‚
â”‚     â€¢ Regular security updates                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 15. Backup & Recovery Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKUP STRATEGY                                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  1. Database Backup                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Schedule: Daily at 02:00 AM                             â”‚ â”‚
â”‚  â”‚ Retention: 30 days daily, 12 months monthly             â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Command:                                                â”‚ â”‚
â”‚  â”‚ php artisan backup:run --only-db                        â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Storage:                                                â”‚ â”‚
â”‚  â”‚ â€¢ Local: storage/backups/                               â”‚ â”‚
â”‚  â”‚ â€¢ Remote: AWS S3 / Google Drive                         â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Test Recovery: Weekly                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  2. File Storage Backup                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Schedule: Daily at 03:00 AM                             â”‚ â”‚
â”‚  â”‚ Includes:                                               â”‚ â”‚
â”‚  â”‚ â€¢ storage/app/private/ (all photos)                     â”‚ â”‚
â”‚  â”‚ â€¢ .env file (encrypted)                                 â”‚ â”‚
â”‚  â”‚ â€¢ public/ (uploaded assets)                             â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Command:                                                â”‚ â”‚
â”‚  â”‚ php artisan backup:run --only-files                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  3. Code Repository                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â€¢ Git repository (GitHub/GitLab)                        â”‚ â”‚
â”‚  â”‚ â€¢ Version tagged releases                               â”‚ â”‚
â”‚  â”‚ â€¢ Protected main branch                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                               â”‚
â”‚  4. Disaster Recovery Plan                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ RTO (Recovery Time Objective): 4 hours                  â”‚ â”‚
â”‚  â”‚ RPO (Recovery Point Objective): 24 hours                â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Recovery Steps:                                         â”‚ â”‚
â”‚  â”‚ 1. Clone repository from git                            â”‚ â”‚
â”‚  â”‚ 2. Restore latest database backup                       â”‚ â”‚
â”‚  â”‚ 3. Restore file storage                                 â”‚ â”‚
â”‚  â”‚ 4. Configure .env                                       â”‚ â”‚
â”‚  â”‚ 5. Run migrations (if needed)                           â”‚ â”‚
â”‚  â”‚ 6. Test critical functions                              â”‚ â”‚
â”‚  â”‚ 7. Switch DNS/Load balancer                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 16. Monitoring & Alerts

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SYSTEM MONITORING                                            â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                               â”‚
â”‚  1. Application Monitoring                                   â”‚
â”‚     â€¢ Laravel Telescope (development)                        â”‚
â”‚     â€¢ Log monitoring (storage/logs/)                         â”‚
â”‚     â€¢ Error tracking (Sentry/Bugsnag)                        â”‚
â”‚     â€¢ Performance monitoring (New Relic)                     â”‚
â”‚                                                               â”‚
â”‚  2. Database Monitoring                                      â”‚
â”‚     â€¢ Query performance                                      â”‚
â”‚     â€¢ Connection pool usage                                  â”‚
â”‚     â€¢ Storage usage                                          â”‚
â”‚     â€¢ Slow query log                                         â”‚
â”‚                                                               â”‚
â”‚  3. Server Monitoring                                        â”‚
â”‚     â€¢ CPU usage                                              â”‚
â”‚     â€¢ Memory usage                                           â”‚
â”‚     â€¢ Disk space                                             â”‚
â”‚     â€¢ Network traffic                                        â”‚
â”‚                                                               â”‚
â”‚  4. Business Metrics Monitoring                              â”‚
â”‚     â€¢ PM compliance percentage                               â”‚
â”‚     â€¢ Work order response time                               â”‚
â”‚     â€¢ Average MTTR                                           â”‚
â”‚     â€¢ Stock alert count                                      â”‚
â”‚     â€¢ Critical WO count                                      â”‚
â”‚                                                               â”‚
â”‚  5. Alerts Configuration                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Critical (Immediate notification):                      â”‚ â”‚
â”‚  â”‚ â€¢ Application errors (500 errors)                       â”‚ â”‚
â”‚  â”‚ â€¢ Database connection failure                           â”‚ â”‚
â”‚  â”‚ â€¢ Disk space > 90%                                      â”‚ â”‚
â”‚  â”‚ â€¢ Critical WO not reviewed > 30 min                     â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ Warning (Email notification):                           â”‚ â”‚
â”‚  â”‚ â€¢ PM compliance < 85%                                   â”‚ â”‚
â”‚  â”‚ â€¢ Stock alerts > 10 unresolved                          â”‚ â”‚
â”‚  â”‚ â€¢ Backup failure                                        â”‚ â”‚
â”‚  â”‚ â€¢ High query execution time                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 12. Cascade Dropdown Logic

### 12.1 Equipment Hierarchy Cascade

The system uses 4-level equipment hierarchy with cascade dropdown dependency:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  EQUIPMENT CASCADE FLOW                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Level 1: AREA
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select Area:                       â”‚
â”‚ â–¼ [Proses                       ]  â”‚ â—„â”€â”€â”€ User selects Area
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ (Filters Sub Areas where area_id = selected)
              
Level 2: SUB AREA
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select Sub Area:                   â”‚
â”‚ â–¼ [EP                           ]  â”‚ â—„â”€â”€â”€ Filtered options
â”‚   EP, FP, COOK, PACK               â”‚     (only sub_areas 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      from selected area)
              â†“ (Filters Assets where sub_area_id = selected)
              
Level 3: ASSET
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select Asset:                      â”‚
â”‚ â–¼ [Processing                   ]  â”‚ â—„â”€â”€â”€ Filtered options
â”‚   Processing, Packaging            â”‚     (only assets from
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      selected sub_area)
              â†“ (Filters Sub Assets where asset_id = selected)
              
Level 4: SUB ASSET
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select Sub Asset:                  â”‚
â”‚ â–¼ [Fryer                        ]  â”‚ â—„â”€â”€â”€ Filtered options
â”‚   Fryer, Mixer, Conveyor           â”‚     (only sub_assets
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      from selected asset)
```

### 12.2 Implementation (Filament)

**Location:** `app/Filament/Resources/*/Form.php`

```php
// Example: WorkOrderResource form
Forms\Components\Select::make('area_id')
    ->label('Area')
    ->relationship('area', 'name')
    ->searchable()
    ->preload()
    ->live() // â—„â”€â”€ Triggers cascade
    ->afterStateUpdated(fn (callable $set) => $set('sub_area_id', null))
    ->required(),

Forms\Components\Select::make('sub_area_id')
    ->label('Sub Area')
    ->relationship(
        'subArea', 
        'name',
        fn (Builder $query, callable $get) => 
            $query->when($get('area_id'), fn ($q) => 
                $q->where('area_id', $get('area_id'))
            )
    )
    ->searchable()
    ->preload()
    ->live() // â—„â”€â”€ Triggers next cascade
    ->afterStateUpdated(fn (callable $set) => $set('asset_id', null))
    ->disabled(fn (callable $get) => !$get('area_id')),

Forms\Components\Select::make('asset_id')
    ->label('Asset')
    ->relationship(
        'asset', 
        'name',
        fn (Builder $query, callable $get) => 
            $query->when($get('sub_area_id'), fn ($q) => 
                $q->where('sub_area_id', $get('sub_area_id'))
            )
    )
    ->searchable()
    ->preload()
    ->live()
    ->afterStateUpdated(fn (callable $set) => $set('sub_asset_id', null))
    ->disabled(fn (callable $get) => !$get('sub_area_id')),

Forms\Components\Select::make('sub_asset_id')
    ->label('Sub Asset')
    ->relationship(
        'subAsset', 
        'name',
        fn (Builder $query, callable $get) => 
            $query->when($get('asset_id'), fn ($q) => 
                $q->where('asset_id', $get('asset_id'))
            )
    )
    ->searchable()
    ->preload()
    ->disabled(fn (callable $get) => !$get('asset_id')),
```

### 12.3 Reset Behavior

When user changes a parent dropdown, all child dropdowns are automatically reset:

```
User changes Area:
  â””â”€â–¶ Sub Area = null
      â””â”€â–¶ Asset = null
          â””â”€â–¶ Sub Asset = null

User changes Sub Area:
  â””â”€â–¶ Asset = null
      â””â”€â–¶ Sub Asset = null

User changes Asset:
  â””â”€â–¶ Sub Asset = null
```

This prevents orphaned selections (e.g., Sub Asset from Area A being selected when user switches to Area B).

---

## 13. Auto-Calculation Workflows

### 13.1 Work Order MTTR Calculation

**Mean Time To Repair (MTTR)** is automatically calculated when WO is completed:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WO MTTR Auto-Calculation Flow                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: Technician starts work
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status: in_progress                â”‚
â”‚ started_at: 2025-11-26 08:00:00    â”‚
â”‚ completed_at: null                 â”‚
â”‚ mttr: null                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 2: Technician completes work
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status: completed                  â”‚
â”‚ started_at: 2025-11-26 08:00:00    â”‚
â”‚ completed_at: 2025-11-26 10:30:00  â”‚ â—„â”€â”€ User sets timestamp
â”‚ mttr: null                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 3: WorkOrderObserver::updated() triggers
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WoService::calculateMTTR($workOrder)                       â”‚
â”‚                                                            â”‚
â”‚ $mttr = ($completed_at - $started_at)->totalMinutes;      â”‚
â”‚ $mttr = (10:30:00 - 08:00:00) = 150 minutes               â”‚
â”‚                                                            â”‚
â”‚ $workOrder->update(['mttr' => 150]);                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 4: Result stored
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status: completed                  â”‚
â”‚ started_at: 2025-11-26 08:00:00    â”‚
â”‚ completed_at: 2025-11-26 10:30:00  â”‚
â”‚ mttr: 150 (minutes)                â”‚ â—„â”€â”€ Auto-calculated
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Formula:**
```
MTTR (minutes) = TIMESTAMPDIFF(MINUTE, started_at, completed_at)
MTTR (hours) = ROUND(mttr / 60, 2)
```

### 13.2 Work Order Cost Calculation

**Total WO Cost** = Labor Cost + Parts Cost + Downtime Cost

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WO Cost Auto-Calculation Flow                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: Work Order completed with data
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WO #WO-202511-123                                        â”‚
â”‚ started_at: 08:00                                        â”‚
â”‚ completed_at: 10:30                                      â”‚
â”‚ mttr: 150 minutes (2.5 hours)                            â”‚
â”‚ total_downtime: 180 minutes (3 hours)                    â”‚
â”‚                                                          â”‚
â”‚ Parts Used:                                              â”‚
â”‚  - V-Belt: 2 pcs Ã— Rp 50,000 = Rp 100,000              â”‚
â”‚  - Bearing: 1 pc Ã— Rp 150,000 = Rp 150,000             â”‚
â”‚  Total Parts: Rp 250,000                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 2: CostService::calculateWoCost() triggered
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CALCULATION BREAKDOWN:                                   â”‚
â”‚                                                          â”‚
â”‚ 1. Labor Cost:                                           â”‚
â”‚    Duration = 2.5 hours                                  â”‚
â”‚    Rate = Rp 50,000/hour (from config)                  â”‚
â”‚    labor_cost = 2.5 Ã— 50,000 = Rp 125,000              â”‚
â”‚                                                          â”‚
â”‚ 2. Parts Cost:                                           â”‚
â”‚    parts_cost = SUM(wo_parts_usages.total_cost)         â”‚
â”‚    parts_cost = Rp 250,000                              â”‚
â”‚                                                          â”‚
â”‚ 3. Downtime Cost:                                        â”‚
â”‚    Downtime = 3 hours                                    â”‚
â”‚    Rate = Rp 1,000,000/hour (from config)               â”‚
â”‚    downtime_cost = 3 Ã— 1,000,000 = Rp 3,000,000        â”‚
â”‚                                                          â”‚
â”‚ 4. Total Cost:                                           â”‚
â”‚    total_cost = 125,000 + 250,000 + 3,000,000           â”‚
â”‚    total_cost = Rp 3,375,000                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 3: Save to wo_costs table
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ wo_costs                           â”‚
â”‚ work_order_id: 123                 â”‚
â”‚ labour_cost: 125,000               â”‚
â”‚ parts_cost: 250,000                â”‚
â”‚ downtime_cost: 3,000,000           â”‚
â”‚ total_cost: 3,375,000              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Configuration:** `config/cmms.php`
```php
return [
    'costs' => [
        'labor_rate_per_hour' => 50000,      // Rp 50k/hour
        'downtime_rate_per_hour' => 1000000, // Rp 1M/hour
    ],
];
```

### 13.3 PM Compliance Calculation

**PM Compliance** determines if PM was completed on time:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PM Compliance Auto-Calculation Flow                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: PM Execution scheduled
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PM Execution #PME-202511-045       â”‚
â”‚ scheduled_date: 2025-11-26 08:00   â”‚
â”‚ actual_start: null                 â”‚
â”‚ actual_end: null                   â”‚
â”‚ is_on_time: null                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 2: Technician completes PM
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PM Execution #PME-202511-045       â”‚
â”‚ scheduled_date: 2025-11-26 08:00   â”‚
â”‚ actual_start: 2025-11-26 08:15     â”‚
â”‚ actual_end: 2025-11-26 10:30       â”‚ â—„â”€â”€ User completes
â”‚ is_on_time: null                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 3: PmService::calculateCompliance() triggered
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMPLIANCE LOGIC:                                        â”‚
â”‚                                                          â”‚
â”‚ Grace Period = 24 hours                                  â”‚
â”‚ Deadline = scheduled_date + 24 hours                     â”‚
â”‚ Deadline = 2025-11-26 08:00 + 24h = 2025-11-27 08:00   â”‚
â”‚                                                          â”‚
â”‚ IF actual_end <= deadline THEN                           â”‚
â”‚    is_on_time = TRUE (1)                                â”‚
â”‚ ELSE                                                     â”‚
â”‚    is_on_time = FALSE (0)                               â”‚
â”‚ END IF                                                   â”‚
â”‚                                                          â”‚
â”‚ Result:                                                  â”‚
â”‚ 2025-11-26 10:30 <= 2025-11-27 08:00 âœ…                â”‚
â”‚ is_on_time = TRUE                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 4: Update pm_executions table
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PM Execution #PME-202511-045       â”‚
â”‚ scheduled_date: 2025-11-26 08:00   â”‚
â”‚ actual_start: 2025-11-26 08:15     â”‚
â”‚ actual_end: 2025-11-26 10:30       â”‚
â”‚ is_on_time: 1 (TRUE)               â”‚ â—„â”€â”€ Auto-calculated
â”‚ duration: 135 minutes              â”‚ â—„â”€â”€ Auto-calculated
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 5: Create pm_compliances record
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ pm_compliances                     â”‚
â”‚ pm_execution_id: 45                â”‚
â”‚ is_compliant: 1                    â”‚
â”‚ variance_hours: +21.5              â”‚
â”‚ notes: "Completed on time"         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Compliance Percentage Formula:**
```sql
-- Monthly PM Compliance %
SELECT 
    COUNT(CASE WHEN is_on_time = 1 THEN 1 END) * 100.0 / COUNT(*) 
        AS compliance_percentage
FROM pm_executions
WHERE MONTH(scheduled_date) = 11 
  AND YEAR(scheduled_date) = 2025;
  
-- Result: 92.5% (37 on-time / 40 total)
```

### 13.4 Inventory Auto-Deduction

**Parts stock** is automatically reduced when used in WO or PM:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Inventory Auto-Deduction Flow                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: Initial stock
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ parts (id: 5 - V-Belt)             â”‚
â”‚ current_stock: 50                  â”‚
â”‚ min_stock: 10                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 2: Technician records parts usage in WO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WO Process Form:                                           â”‚
â”‚ Part: V-Belt                                               â”‚
â”‚ Quantity Used: 3 pcs                                       â”‚
â”‚ Unit Price: Rp 50,000                                      â”‚
â”‚ Total Cost: Rp 150,000 (auto-calculated)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 3: Save wo_parts_usages record
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ wo_parts_usages                    â”‚
â”‚ work_order_id: 123                 â”‚
â”‚ part_id: 5                         â”‚
â”‚ quantity_used: 3                   â”‚
â”‚ unit_price: 50,000                 â”‚
â”‚ total_cost: 150,000                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 4: PartObserver::updated() triggers
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ InventoryService::deductStock($partId, $quantity)        â”‚
â”‚                                                          â”‚
â”‚ $part = Part::find(5);                                   â”‚
â”‚ $part->current_stock -= 3;  // 50 - 3 = 47             â”‚
â”‚ $part->save();                                           â”‚
â”‚                                                          â”‚
â”‚ // Also update inventories table (two-way sync)         â”‚
â”‚ $inventory = Inventory::where('part_id', 5)->first();   â”‚
â”‚ $inventory->quantity -= 3;                              â”‚
â”‚ $inventory->save();                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 5: Create inventory_movements record
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ inventory_movements                â”‚
â”‚ part_id: 5                         â”‚
â”‚ inventory_id: 12                   â”‚
â”‚ movement_type: 'out'               â”‚
â”‚ quantity: 3                        â”‚
â”‚ reference_type: 'work_order'       â”‚
â”‚ reference_id: 123                  â”‚
â”‚ notes: 'WO-202511-123 parts usage' â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 6: Check if low stock
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IF current_stock <= min_stock THEN                       â”‚
â”‚    CREATE stock_alerts record                            â”‚
â”‚    NOTIFY tech_store staff                               â”‚
â”‚ END IF                                                   â”‚
â”‚                                                          â”‚
â”‚ 47 > 10 âœ… No alert needed                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
STEP 7: Final stock state
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ parts (id: 5 - V-Belt)             â”‚
â”‚ current_stock: 47                  â”‚ â—„â”€â”€ Auto-reduced
â”‚ min_stock: 10                      â”‚
â”‚ last_movement: 2025-11-26 10:30    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 13.5 Technician Performance Score

**Performance Score** is calculated based on PM compliance and workload:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Technician Performance Score Calculation                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Technician: Agus Technician Mechanic (TCM001)
Period: November 2025

DATA COLLECTION:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PM Executions:                                           â”‚
â”‚ - Total PM: 20                                           â”‚
â”‚ - On-time PM: 18                                         â”‚
â”‚ - Late PM: 2                                             â”‚
â”‚                                                          â”‚
â”‚ Work Orders:                                             â”‚
â”‚ - Total WO Processed: 15                                 â”‚
â”‚ - Completed WO: 14                                       â”‚
â”‚ - Pending WO: 1                                          â”‚
â”‚                                                          â”‚
â”‚ Average MTTR: 90 minutes                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
CALCULATION:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. PM Compliance Score (40 points max):                  â”‚
â”‚    compliance_% = (18 / 20) Ã— 100 = 90%                 â”‚
â”‚    score = 90% Ã— 0.40 = 36 points                       â”‚
â”‚                                                          â”‚
â”‚ 2. Workload Score (30 points max):                       â”‚
â”‚    total_tasks = 20 PM + 15 WO = 35                     â”‚
â”‚    IF total_tasks >= 30 THEN 30 points                   â”‚
â”‚    ELSEIF total_tasks >= 20 THEN 25 points              â”‚
â”‚    ELSEIF total_tasks >= 10 THEN 20 points              â”‚
â”‚    ELSE 10 points                                        â”‚
â”‚    score = 30 points                                     â”‚
â”‚                                                          â”‚
â”‚ 3. Activity Score (30 points max):                       â”‚
â”‚    IF total_tasks > 0 THEN 30 points                     â”‚
â”‚    ELSE 0 points                                         â”‚
â”‚    score = 30 points                                     â”‚
â”‚                                                          â”‚
â”‚ 4. Total Performance Score:                              â”‚
â”‚    total = 36 + 30 + 30 = 96 / 100                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
RESULT:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Technician: TCM001                 â”‚
â”‚ Performance Score: 96              â”‚
â”‚ Grade: Excellent (>90)             â”‚
â”‚ Period: Nov 2025                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Grading Scale:**
- 90-100: Excellent â­â­â­
- 80-89: Good â­â­
- 70-79: Fair â­
- <70: Needs Improvement âš ï¸

---

## ğŸ¯ CONCLUSION

This WORKFLOW.md document provides a comprehensive guide to the CMMS system's workflows, covering:

âœ… **User Roles & Access** - 6 roles with specific permissions  
âœ… **PM Workflow** - From scheduling to execution with personalized views  
âœ… **WO Workflow** - Complete lifecycle from barcode scan to closure  
âœ… **Inventory Management** - Automatic deduction with two-way sync  
âœ… **Barcode System** - Operator submission without login (QR codes)  
âœ… **Auto-Calculations** - MTTR, costs, compliance, performance scores  
âœ… **Compliance Tracking** - Weekly/monthly automatic reporting  
âœ… **Data Flow Diagrams** - Visual representation of processes  
âœ… **Cascade Dropdown Logic** - 4-level equipment hierarchy filtering  
âœ… **System Integration Points** - Power BI, external APIs, notifications  
âœ… **Performance Optimization** - Database indexing, caching strategies  
âœ… **Security Best Practices** - RBAC, audit logging, input validation  
âœ… **Backup & Recovery** - Automated backups, disaster recovery  
âœ… **Monitoring & Alerts** - System health and business metrics  

---

**Document Version:** 1.1  
**Last Updated:** November 26, 2025  
**Maintained By:** Nandang Wijaya  
**System:** PepsiCo Engineering CMMS (Laravel 12 + Filament v4)  

**Related Documents:**
- `README.md` - Installation and setup guide
- `ARCHITECTURE.md` - System architecture diagrams
- `POWERBI_INTEGRATION.md` - Power BI reporting setup
- `CHECKLIST.md` - Development progress tracking
- `POLICY_PERMISSION_GUIDE.md` - Authorization rules
- `DEPLOYMENT_READINESS_REPORT.md` - Pre-deployment checklist

---